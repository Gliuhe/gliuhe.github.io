<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë∂ÖÁ∫ßÂÖëÊç¢Âà∏Èì∂Ë°å - ÁêÜË¥¢‰∏≠ÂøÉ</title>
    <style>
        /* Âü∫Á°ÄÊ†∑Âºè - ‰∏é‰∏ªÈ°µÈù¢‰øùÊåÅ‰∏ÄËá¥ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Marker Felt', 'Arial Rounded MT Bold', sans-serif;
        }
        
        :root {
            --primary-color: #06d6a0;
            --secondary-color: #ff6b6b;
            --accent-color: #ffd166;
            --background-gradient: linear-gradient(135deg, #83a4d4 0%, #b6fbff 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333;
            --border-color: #ffd166;
        }
        
        [data-theme="dark"] {
            --primary-color: #00c896;
            --secondary-color: #ff5252;
            --accent-color: #ffb74d;
            --background-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --card-bg: rgba(52, 73, 94, 0.95);
            --text-color: #ecf0f1;
            --border-color: #ffb74d;
        }
        
        [data-theme="pink"] {
            --primary-color: #ff6b9d;
            --secondary-color: #ff9a9e;
            --accent-color: #ffd1dc;
            --background-gradient: linear-gradient(135deg, #ff6b9d 0%, #ff9a9e 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333;
            --border-color: #ffd1dc;
        }
        
        [data-theme="blue"] {
            --primary-color: #4fc3f7;
            --secondary-color: #29b6f6;
            --accent-color: #81d4fa;
            --background-gradient: linear-gradient(135deg, #1976d2 0%, #42a5f5 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333;
            --border-color: #81d4fa;
        }

        /* ‰∏ªÈ¢òÈÄâÊã©Âô®Ê†∑Âºè */
        .theme-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
        }

        .theme-btn {
            padding: 8px 16px;
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: var(--primary-color);
            font-weight: bold;
            font-size: 0.9rem;
        }

        .theme-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .theme-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        body {
            background: var(--background-gradient);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s ease;
        }
        
        .container {
            background: var(--card-bg);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 1000px;
            padding: 30px;
            margin-top: 20px;
            border: 3px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }
        
        .header h1 {
            color: var(--secondary-color);
            font-size: 2.8rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
        }
        
        .header::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 25%;
            width: 50%;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            border-radius: 2px;
        }
        
        h2 {
            color: var(--primary-color);
            margin: 20px 0 15px;
            padding-bottom: 10px;
            border-bottom: 2px dashed var(--accent-color);
            font-size: 1.8rem;
        }
        
        /* Èì∂Ë°åÂç°ÁâáÊ†∑Âºè */
        .bank-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 15px 0;
        }
        
        .bank-card {
            width: 100%;
            min-height: 320px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            align-items: start;
        }
        
        .bank-card-main {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .bank-card-history {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            border: 2px solid var(--border-color);
            max-height: 300px;
            overflow-y: auto;
            height: 100%;
            width: 100%;
            min-height: 220px;
        }
        
        .history-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
            text-align: center;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 5px;
        }
        
        .history-item {
            padding: 6px 8px;
            margin-bottom: 6px;
            border-radius: 6px;
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 40px;
        }
        
        .history-profit {
            background: rgba(6, 214, 160, 0.2);
            border-left: 4px solid #06d6a0;
        }
        
        .history-loss {
            background: rgba(255, 107, 107, 0.2);
            border-left: 4px solid #ff6b6b;
        }
        
        .history-zero {
            background: rgba(200, 200, 200, 0.2);
            border-left: 4px solid #cccccc;
        }
        
        .history-amount {
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .history-date {
            font-size: 0.75rem;
            color: #666;
        }
        
        .bank-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 18px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid var(--accent-color);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .bank-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .bank-card::before {
            position: absolute;
            font-size: 4rem;
            opacity: 0.1;
            top: -10px;
            right: -10px;
            transform: rotate(15deg);
            transition: all 0.4s ease;
        }
        
        .bank-card:hover::before {
            transform: rotate(25deg) scale(1.2);
            opacity: 0.2;
        }
        
        .bank-card.savings::before {
            content: "üí∞";
        }
        
        .bank-card.deposit::before {
            content: "üè¶";
        }
        
        .bank-card.investment::before {
            content: "üìà";
        }
        
        .bank-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: block;
            animation: float 3s ease-in-out infinite;
        }
        
        .bank-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .bank-amount {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--secondary-color);
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .bank-card:hover .bank-amount {
            transform: scale(1.1);
            color: var(--accent-color);
        }
        
        .bank-info {
            font-size: 1rem;
            color: #666;
            margin: 10px 0;
            line-height: 1.4;
        }
        
        .bank-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .bank-btn {
            padding: 8px 16px;
            font-size: 0.9rem;
            border-radius: 18px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            flex: 1;
            min-width: 100px;
        }
        
        .bank-btn.deposit {
            background: var(--primary-color);
            color: white;
        }
        
        .bank-btn.withdraw {
            background: var(--secondary-color);
            color: white;
        }
        
        .bank-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        

        
        /* ‰∫§ÊòìÂéÜÂè≤Ê†∑Âºè */
        .transaction-history {
            margin-top: 30px;
        }
        
        .transaction-item {
            padding: 15px;
            border-bottom: 2px dashed var(--accent-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.5);
        }
        
        .transaction-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateX(5px);
        }
        
        .transaction-positive {
            background-color: rgba(6, 214, 160, 0.1);
        }
        
        .transaction-negative {
            background-color: rgba(255, 107, 107, 0.1);
        }
        
        .transaction-interest {
            background-color: rgba(255, 209, 102, 0.1);
        }
        
        /* ÊåâÈíÆÊ†∑Âºè */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s;
            margin: 8px;
            box-shadow: 0 6px 12px rgba(6, 214, 160, 0.3);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        
        .btn:hover {
            background: #05c191;
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 16px rgba(6, 214, 160, 0.4);
        }
        
        .btn-danger {
            background: #ff6b6b;
            box-shadow: 0 6px 12px rgba(255, 107, 107, 0.3);
        }
        
        .btn-danger:hover {
            background: #ff5252;
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.4);
        }
        
        .form-group {
            margin: 18px 0;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #555;
            font-size: 1.1rem;
        }
        
        input, select {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 15px;
            font-size: 1.1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }
        
        input:focus, select:focus {
            border-color: #06d6a0;
            outline: none;
            box-shadow: 0 0 0 3px rgba(6, 214, 160, 0.2);
        }
        
        /* Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            border: 3px solid #ffd166;
            position: relative;
        }
        
        .status-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 1000;
            animation: slideDown 0.5s ease-out;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        .status-success {
            background: #06d6a0;
            color: white;
        }
        
        .status-error {
            background: #ff6b6b;
            color: white;
        }
        
        .status-warning {
            background: #ffd166;
            color: #333;
        }
        
        @keyframes slideDown {
            from {
                transform: translateX(-50%) translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes countUp {
            from { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            to { transform: scale(1); opacity: 1; }
        }
        
        .animate-count-up {
            animation: countUp 0.5s ease-out;
        }
        
        /* Èì∂Ë°åËÆæÁΩÆÁâπÂÆöÊ†∑Âºè */
        .nav-tabs {
            display: flex;
            border-bottom: 3px solid var(--accent-color);
            margin-bottom: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: bold;
            color: #777;
            font-size: 1.2rem;
            position: relative;
            transition: all 0.3s;
            margin: 0 5px;
            border-radius: 15px 15px 0 0;
        }
        
        .nav-tab.active {
            color: var(--primary-color);
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.05);
        }
        
        .nav-tab.active::after {
            content: "";
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--primary-color);
            border-radius: 2px;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .setting-description {
            background: rgba(255, 255, 255, 0.7);
            border-left: 4px solid var(--primary-color);
            padding: 12px 15px;
            margin-top: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .setting-description strong {
            color: var(--primary-color);
        }
        
        .setting-description ul {
            margin: 8px 0 0 20px;
        }
        
        .setting-description li {
            margin-bottom: 5px;
        }
        
        .risk-display {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin: 15px 0;
            padding: 10px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border-radius: 10px;
        }
        
        .rule-section {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--accent-color);
        }
        
        .rule-section h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px dashed var(--accent-color);
            padding-bottom: 8px;
        }
        
        .rule-section ul {
            margin-left: 20px;
        }
        
        .rule-section li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
            gap: 15px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ËåÉÂõ¥ÊªëÂùóÊ†∑Âºè */
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .bank-grid {
                gap: 15px;
            }
            
            .bank-card {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            

            
            .bank-actions {
                flex-direction: column;
            }
            
            .bank-btn {
                min-width: auto;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
            }
            
            .nav-tab {
                flex: 1;
                text-align: center;
                padding: 12px 8px;
                font-size: 1rem;
                margin: 3px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 90%;
                margin: 8px 0;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            
            .rule-section {
                padding: 15px;
            }
            
            .risk-display {
                font-size: 1rem;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- ‰∏ªÈ¢òÈÄâÊã©Âô® -->
    <div class="theme-selector">
        <button class="theme-btn active" onclick="setTheme('default')">ÈªòËÆ§</button>
        <button class="theme-btn" onclick="setTheme('dark')">ÊöóÈªë</button>
        <button class="theme-btn" onclick="setTheme('pink')">Á≤âËâ≤</button>
        <button class="theme-btn" onclick="setTheme('blue')">ËìùËâ≤</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>Ë∂ÖÁ∫ßÂÖëÊç¢Âà∏Èì∂Ë°å</h1>
            <p>ËÆ©ÊÇ®ÁöÑÂÖëÊç¢Âà∏Â¢ûÂÄºÔºÅÂÆâÂÖ®ÁêÜË¥¢ÔºåËé∑ÂèñÂà©ÊÅØ</p>
        </div>

        <!-- ËøîÂõû‰∏ªÈ°µÊåâÈíÆ -->
        <div style="text-align: center; margin-bottom: 25px;">
            <button class="btn" onclick="goBack()">üè† ËøîÂõû‰∏ªÈ°µÈù¢</button>
            <button class="btn" onclick="openSettingsModal()" style="background: var(--accent-color); color: #333;">‚öôÔ∏è Èì∂Ë°åËÆæÁΩÆ</button>
            <button class="btn" onclick="simulateNextDay()" style="background: var(--secondary-color); color: white;">üöÄ Ë∂ÖÁ∫ßÂø´Ëøõ</button>
        </div>

        <!-- ÂΩìÂâçÂÖëÊç¢Âà∏‰ΩôÈ¢ù -->
        <div class="bank-card savings">
            <div class="bank-icon">üé´</div>
            <div class="bank-title">ÂΩìÂâçÂÖëÊç¢Âà∏‰ΩôÈ¢ù</div>
            <div class="bank-amount" id="currentVoucherAmount">0</div>
            <div class="bank-info">ËøôÊòØÊÇ®ÂèØ‰ª•Áî®‰∫éÂ≠òÂÇ®ÂíåÊ∂àË¥πÁöÑÂÖëÊç¢Âà∏Êï∞Èáè</div>
        </div>

        <!-- Èì∂Ë°åË¥¶Êà∑ÊÄªËßà -->
        <h2>ÊàëÁöÑÈì∂Ë°åË¥¶Êà∑</h2>
        <div class="bank-grid">
            <!-- Ê¥ªÊúüÂ≠òÊ¨æ -->
            <div class="bank-card savings">
                <div class="bank-card-main">
                    <div class="bank-icon">üí∞</div>
                    <div class="bank-title">Ê¥ªÊúüÂ≠òÊ¨æ</div>
                    <div class="bank-amount" id="savingsAmount">0</div>
                    <div class="bank-earnings" style="margin: 10px 0; padding: 8px; background: rgba(6, 214, 160, 0.1); border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.9rem; color: #666;">Êò®Êó•Êî∂Áõä</div>
                        <div class="yesterday-earnings" id="savingsEarnings" style="font-size: 1.4rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div class="bank-info">
                        <div>Êó•Âà©Áéá: <span id="savingsRateDisplay">0.1%</span></div>
                        <div>ÈöèÊó∂Â≠òÂèñÔºåÁÅµÊ¥ªÊñπ‰æø</div>
                    </div>
                    <div class="bank-actions">
                        <button class="bank-btn deposit" onclick="openDepositModal('savings')">Â≠òÂÖ•</button>
                        <button class="bank-btn withdraw" onclick="openWithdrawModal('savings')">ÂèñÂá∫</button>
                    </div>
                </div>
                <div class="bank-card-history">
                    <div class="history-title">üìä Êî∂ÁõäËÆ∞ÂΩï</div>
                    <div id="savingsHistory"></div>
                </div>
            </div>

            <!-- ÂÆöÊúüÂ≠òÊ¨æ -->
            <div class="bank-card deposit">
                <div class="bank-card-main">
                    <div class="bank-icon">üè¶</div>
                    <div class="bank-title">ÂÆöÊúüÂ≠òÊ¨æ</div>
                    <div class="bank-amount" id="depositAmount">0</div>
                    <div class="bank-earnings" style="margin: 10px 0; padding: 8px; background: rgba(6, 214, 160, 0.1); border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.9rem; color: #666;">Êò®Êó•Êî∂Áõä</div>
                        <div class="yesterday-earnings" id="depositEarnings" style="font-size: 1.4rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div class="bank-info" id="depositInfo">
                        <div>Êó•Âà©Áéá: <span id="depositRateDisplay">0.3%</span></div>
                        <div>7Â§©ÊúüÈôêÔºåÊî∂ÁõäÊõ¥È´ò</div>
                    </div>
                    <div class="bank-actions">
                        <button class="bank-btn deposit" onclick="openDepositModal('deposit')">Â≠òÂÖ•</button>
                        <button class="bank-btn withdraw" onclick="openWithdrawModal('deposit')">ÂèñÂá∫</button>
                    </div>
                </div>
                <div class="bank-card-history">
                    <div class="history-title">üìä Êî∂ÁõäËÆ∞ÂΩï</div>
                    <div id="depositHistory"></div>
                </div>
            </div>

            <!-- ÊäïËµÑÁêÜË¥¢ -->
            <div class="bank-card investment">
                <div class="bank-card-main">
                    <div class="bank-icon">üìà</div>
                    <div class="bank-title">ÊäïËµÑÁêÜË¥¢</div>
                    <div class="bank-amount" id="investmentAmount">0</div>
                    <div class="bank-earnings" style="margin: 10px 0; padding: 8px; background: rgba(255, 107, 107, 0.1); border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.9rem; color: #666;">Êò®Êó•Êî∂Áõä</div>
                        <div class="yesterday-earnings" id="investmentEarnings" style="font-size: 1.4rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div class="bank-info" id="investmentInfo">
                        <div>Êó•Êî∂Áõä: <span id="investmentRateDisplay">Ê≥¢Âä®Êî∂Áõä</span></div>
                        <div>ÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñÔºåÁ∫ØÈù†Ê≥¢Âä®</div>
                    </div>
                    <div class="bank-actions">
                        <button class="bank-btn deposit" onclick="openDepositModal('investment')">ÊäïËµÑ</button>
                        <button class="bank-btn withdraw" onclick="openWithdrawModal('investment')">ËµéÂõû</button>
                    </div>
                </div>
                <div class="bank-card-history">
                    <div class="history-title">üìä ÁõàÂà©/‰∫èÊçüËÆ∞ÂΩï</div>
                    <div id="investmentHistory"></div>
                </div>
            </div>
        </div>



        <!-- ‰∫§ÊòìÂéÜÂè≤ -->
        <h2>‰∫§ÊòìÂéÜÂè≤</h2>
        <div class="transaction-history">
            <div id="transactionList"></div>
        </div>
    </div>

    <!-- Â≠òÂÖ•Ê®°ÊÄÅÊ°Ü -->
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <h2 id="depositModalTitle">Â≠òÂÖ•ËµÑÈáë</h2>
            <input type="hidden" id="depositAccountType" value="">
            <div class="form-group">
                <label for="depositInputAmount">Â≠òÂÖ•Êï∞Èáè</label>
                <input type="number" id="depositInputAmount" min="1" placeholder="ËØ∑ËæìÂÖ•Â≠òÂÖ•Êï∞Èáè">
            </div>
            
            <button class="btn" onclick="processDeposit()">Á°ÆËÆ§Â≠òÂÖ•</button>
            <button class="btn btn-danger" onclick="closeDepositModal()">ÂèñÊ∂à</button>
        </div>
    </div>

    <!-- ÂèñÂá∫Ê®°ÊÄÅÊ°Ü -->
    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <h2 id="withdrawModalTitle">ÂèñÂá∫ËµÑÈáë</h2>
            <input type="hidden" id="withdrawAccountType" value="">
            <div class="form-group">
                <label for="withdrawAmount">ÂèñÂá∫Êï∞Èáè</label>
                <input type="number" id="withdrawAmount" min="1" placeholder="ËØ∑ËæìÂÖ•ÂèñÂá∫Êï∞Èáè">
            </div>
            
            <button class="btn" onclick="processWithdraw()">Á°ÆËÆ§ÂèñÂá∫</button>
            <button class="btn btn-danger" onclick="closeWithdrawModal()">ÂèñÊ∂à</button>
        </div>
    </div>

    <!-- ÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°Ü -->
    <div id="passwordVerifyModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <h2>üîí ÂØÜÁ†ÅÈ™åËØÅ</h2>
            <p>ËØ∑ËæìÂÖ•ÂØÜÁ†ÅËøõÂÖ•Èì∂Ë°åËÆæÁΩÆ</p>
            <div class="form-group">
                <label for="verifyPassword">ÂØÜÁ†Å</label>
                <input type="password" id="verifyPassword" placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å">
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="verifyBankPassword()">Á°ÆËÆ§</button>
                <button class="btn btn-danger" onclick="closePasswordVerifyModal()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Ë∂ÖÁ∫ßÂø´ËøõÊ®°ÊÄÅÊ°Ü -->
    <div id="simulateNextDayModal" class="modal">
        <div class="modal-content" style="max-width: 500px; max-height: 70vh; overflow-y: auto;">
            <h2>üöÄ Ë∂ÖÁ∫ßÂø´Ëøõ</h2>
            <div id="simulateNextDayContent">
                <p>Ê≠£Âú®Ê£ÄÊü•Ë¥ßÂ∏ÅÊï∞Èáè...</p>
            </div>
            <div class="modal-actions" style="margin-top: 20px;">
                <button class="btn" id="confirmSimulateBtn" style="display: none;">Á°ÆËÆ§Âø´Ëøõ</button>
                <button class="btn btn-danger" onclick="closeSimulateNextDayModal()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Èì∂Ë°åËÆæÁΩÆÊ®°ÊÄÅÊ°Ü -->
    <div id="settingsModal" class="modal">
        <div class="modal-content" style="max-width: 800px; max-height: 80vh; overflow-y: auto;">
            <h2>‚öôÔ∏è Èì∂Ë°åÁ≥ªÁªüËÆæÁΩÆ</h2>
            
            <!-- Ê†áÁ≠æÈ°µÂØºËà™ -->
            <div class="nav-tabs">
                <div class="nav-tab active" onclick="switchSettingsTab('rates')">üí∞ Âà©ÁéáËÆæÁΩÆ</div>
                <div class="nav-tab" onclick="switchSettingsTab('risk')">üìä È£éÈô©ÈÖçÁΩÆ</div>
                <div class="nav-tab" onclick="switchSettingsTab('records')">üìã ËÆ∞ÂΩïÁÆ°ÁêÜ</div>
                <div class="nav-tab" onclick="switchSettingsTab('rules')">üìù ËßÑÂàôËØ¥Êòé</div>
            </div>
            
            <!-- Âà©ÁéáËÆæÁΩÆÊ†áÁ≠æÈ°µ -->
            <div id="rates" class="tab-content active">
                <h3>Ë¥¶Êà∑Âà©ÁéáÈÖçÁΩÆ</h3>
                <div class="form-group">
                    <label for="savingsRate">Ê¥ªÊúüÂ≠òÊ¨æÂà©Áéá (%)</label>
                    <input type="number" id="savingsRate" min="0" max="100" step="0.01" placeholder="ËØ∑ËæìÂÖ•Ê¥ªÊúüÂ≠òÊ¨æÂà©Áéá">
                    <div class="setting-description">
                        <strong>ËßÑÂàôËØ¥ÊòéÔºö</strong>Ê¥ªÊúüÂ≠òÊ¨æÊØèÊó•ËÆ°ÁÆóÂà©ÊÅØÔºåÈöèÊó∂Â≠òÂèñÔºåÈÄÇÂêàÁü≠ÊúüËµÑÈáëÁÆ°ÁêÜ
                    </div>
                </div>
                <div class="form-group">
                    <label for="depositRate">ÂÆöÊúüÂ≠òÊ¨æÂà©Áéá (%)</label>
                    <input type="number" id="depositRate" min="0" max="100" step="0.01" placeholder="ËØ∑ËæìÂÖ•ÂÆöÊúüÂ≠òÊ¨æÂà©Áéá">
                    <div class="setting-description">
                        <strong>ËßÑÂàôËØ¥ÊòéÔºö</strong>ÂÆöÊúüÂ≠òÊ¨æ7Â§©ÊúüÈôêÔºåÊúüÈó¥‰∏çÂèØÂèñÂá∫ÔºåÂà∞ÊúüËá™Âä®Áª≠Â≠ò
                    </div>
                </div>
                <div class="form-group">
                    <label for="investmentRate">ÊäïËµÑÁêÜË¥¢Âü∫Á°ÄÊî∂ÁõäÁéá (%)</label>
                    <input type="number" id="investmentRate" min="0" max="100" step="0.01" placeholder="ËØ∑ËæìÂÖ•Âü∫Á°ÄÊî∂ÁõäÁéá" disabled>
                    <div class="setting-description">
                        <strong>ËßÑÂàôËØ¥ÊòéÔºö</strong>ÊäïËµÑÁêÜË¥¢Âü∫Á°ÄÊî∂ÁõäÁéá‰∏∫0%ÔºåÁ∫ØÈù†ÊØèÊó•Ê≥¢Âä®ÔºåÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñ
                    </div>
                </div>
            </div>
            
            <!-- È£éÈô©ÈÖçÁΩÆÊ†áÁ≠æÈ°µ -->
            <div id="risk" class="tab-content">
                <h3>È£éÈô©Ê≥¢Âä®ÈÖçÁΩÆ</h3>
                
                <div class="form-group">
                    <label for="riskMinLoss">ÊúÄÂ§ß‰∫èÊçüÊØî‰æã (%)</label>
                    <input type="number" id="riskMinLoss" min="-100" max="0" step="1" value="-18" placeholder="ËØ∑ËæìÂÖ•ÊúÄÂ§ß‰∫èÊçüÊØî‰æã">
                    <div class="setting-description">
                        <strong>ËØ¥ÊòéÔºö</strong>ÊäïËµÑÁêÜË¥¢Ë¥¶Êà∑ÂèØËÉΩÂá∫Áé∞ÁöÑÊúÄÂ§ß‰∫èÊçüÊØî‰æãÔºåË¥üÂÄºË°®Á§∫‰∫èÊçü
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="riskMaxProfit">ÊúÄÂ§ßÁõàÂà©ÊØî‰æã (%)</label>
                    <input type="number" id="riskMaxProfit" min="0" max="100" step="1" value="25" placeholder="ËØ∑ËæìÂÖ•ÊúÄÂ§ßÁõàÂà©ÊØî‰æã">
                    <div class="setting-description">
                        <strong>ËØ¥ÊòéÔºö</strong>ÊäïËµÑÁêÜË¥¢Ë¥¶Êà∑ÂèØËÉΩÂá∫Áé∞ÁöÑÊúÄÂ§ßÁõàÂà©ÊØî‰æã
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Ê≥¢Âä®Ê¶ÇÁéáÂàÜÂ∏É</label>
                    <div style="background: rgba(255, 255, 255, 0.7); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: #ff6b6b;">üìâ ‰∫èÊçüÊ¶ÇÁéá: 38%</span>
                            <span style="color: #06d6a0;">üìà ÁõàÂà©Ê¶ÇÁéá: 57%</span>
                            <span style="color: #666;">üìä Èõ∂Êî∂ÁõäÊ¶ÇÁéá: 5%</span>
                        </div>
                        <div style="background: #f0f0f0; height: 20px; border-radius: 10px; overflow: hidden;">
                            <div style="background: #ff6b6b; width: 38%; height: 100%; float: left;"></div>
                            <div style="background: #06d6a0; width: 57%; height: 100%; float: left;"></div>
                            <div style="background: #666; width: 5%; height: 100%; float: left;"></div>
                        </div>
                    </div>
                    <div class="setting-description">
                        <strong>Ê¶ÇÁéáËØ¥ÊòéÔºö</strong>ÊäïËµÑÁêÜË¥¢Ë¥¶Êà∑ÊØèÊó•Êî∂ÁõäÁöÑÊ≥¢Âä®Ê¶ÇÁéáÂàÜÂ∏É
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ÂΩìÂâçÈÖçÁΩÆÈ¢ÑËßà</label>
                    <div class="risk-display" style="text-align: center; font-size: 1.1rem;">
                        <div>ÊäïËµÑÁêÜË¥¢Ê≥¢Âä®ËåÉÂõ¥: <span id="currentRiskRange">-18% ~ +25%</span></div>
                        <div style="font-size: 0.9rem; margin-top: 5px;">‰ªÖÂØπÊäïËµÑÁêÜË¥¢Ë¥¶Êà∑ÁîüÊïà</div>
                    </div>
                </div>
            </div>
            
            <!-- ËÆ∞ÂΩïÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
            <div id="records" class="tab-content">
                <h3>üìã ËÆ∞ÂΩïÁÆ°ÁêÜ</h3>
                
                <div class="form-group">
                    <label>Êî∂ÁõäËÆ∞ÂΩïÁÆ°ÁêÜ</label>
                    <div style="background: rgba(255, 255, 255, 0.7); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <div style="text-align: center; margin-bottom: 15px;">
                            <h4 style="color: #ff6b6b; margin: 0;">‚ö†Ô∏è Âç±Èô©Êìç‰Ωú</h4>
                            <p style="font-size: 0.9rem; color: #666;">Ê≠§Êìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§ÊâÄÊúâÊî∂ÁõäËÆ∞ÂΩïÔºåÊó†Ê≥ïÊÅ¢Â§çÔºÅ</p>
                        </div>
                        
                        <div style="display: flex; justify-content: center; gap: 15px;">
                            <button class="btn btn-danger" onclick="clearEarningsRecords()" style="background: #ff6b6b; color: white; padding: 10px 20px;">
                                üóëÔ∏è Ê∏ÖÁ©∫Êî∂ÁõäËÆ∞ÂΩï
                            </button>
                        </div>
                        
                        <div style="margin-top: 15px; padding: 10px; background: rgba(255, 107, 107, 0.1); border-radius: 5px;">
                            <p style="font-size: 0.85rem; color: #ff6b6b; margin: 0;">
                                <strong>Ê≥®ÊÑèÔºö</strong>Ê∏ÖÁ©∫ÂêéÊâÄÊúâÂéÜÂè≤Êî∂ÁõäËÆ∞ÂΩïÂ∞ÜË¢´Ê∞∏‰πÖÂà†Èô§ÔºåÂåÖÊã¨Âà©ÊÅØÊî∂Áõä„ÄÅÊäïËµÑÁõà‰∫èÁ≠âÊâÄÊúâËÆ∞ÂΩï„ÄÇ
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ÂΩìÂâçËÆ∞ÂΩïÁªüËÆ°</label>
                    <div style="background: rgba(255, 255, 255, 0.7); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <div id="recordsStats" style="text-align: center;">
                            <div>üìä Ê≠£Âú®Âä†ËΩΩËÆ∞ÂΩïÁªüËÆ°...</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ËÆ∞ÂΩïÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
            <div id="records" class="tab-content">
                <h3>üìã ËÆ∞ÂΩïÁÆ°ÁêÜ</h3>
                
                <div class="form-group">
                    <label>Êî∂ÁõäËÆ∞ÂΩïÁÆ°ÁêÜ</label>
                    <div style="background: rgba(255, 255, 255, 0.7); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <div style="text-align: center; margin-bottom: 15px;">
                            <h4 style="color: #ff6b6b; margin: 0;">‚ö†Ô∏è Âç±Èô©Êìç‰Ωú</h4>
                            <p style="font-size: 0.9rem; color: #666;">Ê≠§Êìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§ÊâÄÊúâÊî∂ÁõäËÆ∞ÂΩïÔºåÊó†Ê≥ïÊÅ¢Â§çÔºÅ</p>
                        </div>
                        
                        <div style="display: flex; justify-content: center; gap: 15px;">
                            <button class="btn btn-danger" onclick="clearEarningsRecords()" style="background: #ff6b6b; color: white; padding: 10px 20px;">
                                üóëÔ∏è Ê∏ÖÁ©∫Êî∂ÁõäËÆ∞ÂΩï
                            </button>
                        </div>
                        
                        <div style="margin-top: 15px; padding: 10px; background: rgba(255, 107, 107, 0.1); border-radius: 5px;">
                            <p style="font-size: 0.85rem; color: #ff6b6b; margin: 0;">
                                <strong>Ê≥®ÊÑèÔºö</strong>Ê∏ÖÁ©∫ÂêéÊâÄÊúâÂéÜÂè≤Êî∂ÁõäËÆ∞ÂΩïÂ∞ÜË¢´Ê∞∏‰πÖÂà†Èô§ÔºåÂåÖÊã¨Âà©ÊÅØÊî∂Áõä„ÄÅÊäïËµÑÁõà‰∫èÁ≠âÊâÄÊúâËÆ∞ÂΩï„ÄÇ
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ÂΩìÂâçËÆ∞ÂΩïÁªüËÆ°</label>
                    <div style="background: rgba(255, 255, 255, 0.7); padding: 15px; border-radius: 10px; margin-top: 10px;">
                        <div id="recordsStats" style="text-align: center;">
                            <div>üìä Ê≠£Âú®Âä†ËΩΩËÆ∞ÂΩïÁªüËÆ°...</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ËßÑÂàôËØ¥ÊòéÊ†áÁ≠æÈ°µ -->
            <div id="rules" class="tab-content">
                <h3>Èì∂Ë°åÁ≥ªÁªüËßÑÂàôËØ¥Êòé</h3>
                
                <div class="rule-section">
                    <h4>üìà Âà©ÊÅØËÆ°ÁÆóËßÑÂàô</h4>
                    <ul>
                        <li><strong>ÊØèÊó•ËÆ°ÊÅØÔºö</strong>ÊâÄÊúâË¥¶Êà∑Á±ªÂûãÊØèÊó•ÂáåÊô®Ëá™Âä®ËÆ°ÁÆóÂà©ÊÅØ</li>
                        <li><strong>Â§çÂà©ËÆ°ÁÆóÔºö</strong>Âà©ÊÅØËá™Âä®Âä†ÂÖ•Êú¨ÈáëÔºåÊ¨°Êó•ÁªßÁª≠ËÆ°ÁÆóÂà©ÊÅØ</li>
                        <li><strong>Êó∂Èó¥ËßÑÂàôÔºö</strong>ÂÆöÊúüÂíåÊäïËµÑË¥¶Êà∑ÊåâÂÆåÊï¥Âë®ÊúüËÆ°ÁÆó</li>
                    </ul>
                </div>
                
                <div class="rule-section">
                    <h4>‚ö° Â≠òÂèñÊ¨æËßÑÂàô</h4>
                    <ul>
                        <li><strong>Ê¥ªÊúüÂ≠òÊ¨æÔºö</strong>ÈöèÊó∂Â≠òÂèñÔºåÊó†ÈôêÂà∂Êù°‰ª∂</li>
                        <li><strong>ÂÆöÊúüÂ≠òÊ¨æÔºö</strong>7Â§©ÊúüÈôêÔºåÊúüÈó¥‰∏çÂèØÂèñÂá∫ÔºåÂà∞ÊúüËá™Âä®Áª≠Â≠ò</li>
                        <li><strong>ÊäïËµÑÁêÜË¥¢Ôºö</strong>Âü∫Á°ÄÊî∂ÁõäÁéá‰∏∫0%ÔºåÁ∫ØÈù†ÊØèÊó•Ê≥¢Âä®ÔºåÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñ</li>
                    </ul>
                </div>
                
                <div class="rule-section">
                    <h4>üìä È£éÈô©Êú∫Âà∂</h4>
                    <ul>
                        <li><strong>È£éÈô©Ê≥¢Âä®Ôºö</strong>‰ªÖÂØπÊäïËµÑÁêÜË¥¢Ë¥¶Êà∑ÁîüÊïàÔºåÊ¥ªÊúüÂíåÂÆöÊúüÂ≠òÊ¨æÊó†È£éÈô©Ê≥¢Âä®</li>
                        <li><strong>Ê≥¢Âä®ËåÉÂõ¥Ôºö</strong>ÊØèÊó•Êî∂ÁõäÂú®-18%~+25%‰πãÈó¥ÈöèÊú∫Ê≥¢Âä®</li>
                        <li><strong>Ê¶ÇÁéáÂàÜÂ∏ÉÔºö</strong>30%Ê¶ÇÁéá‰∫èÊçüÔºå65%Ê¶ÇÁéáÁõàÂà©Ôºå5%Ê¶ÇÁéáÈõ∂Êî∂Áõä</li>
                        <li><strong>ÂÆâÂÖ®‰øùÈöúÔºö</strong>Êú¨Èáë‰∏ç‰ºöÂõ†È£éÈô©Ê≥¢Âä®ËÄåÂáèÂ∞ë</li>
                    </ul>
                </div>
                
                <div class="rule-section">
                    <h4>üí° ‰ΩøÁî®Âª∫ËÆÆ</h4>
                    <ul>
                        <li>Ê†πÊçÆËµÑÈáë‰ΩøÁî®ËÆ°ÂàíÈÄâÊã©ÂêàÈÄÇÁöÑË¥¶Êà∑Á±ªÂûã</li>
                        <li>È£éÈô©ÊâøÂèóËÉΩÂäõËæÉ‰ΩéÂª∫ËÆÆÈÄâÊã©‰øùÂÆàÂûãÈÖçÁΩÆ</li>
                        <li>ÂÆöÊúüÊ£ÄÊü•Ë¥¶Êà∑‰ΩôÈ¢ùÂíåÂà©ÊÅØÊî∂Áõä</li>
                    </ul>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn" onclick="saveSettings()">üíæ ‰øùÂ≠òËÆæÁΩÆ</button>
                <button class="btn btn-warning" onclick="resetToDefault()">üîÑ ÊÅ¢Â§çÈªòËÆ§</button>
                <button class="btn btn-danger" onclick="closeSettingsModal()">‚ùå ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <script>
        // ËØäÊñ≠‰ª£Á†Å - ÂÖ®Â±ÄÈîôËØØÊçïËé∑
        window.addEventListener('error', function(e) {
            console.error("[ÂÖ®Â±ÄÈîôËØØ] ", e.message, "ÂèëÁîüÂú®", e.filename, "Ë°åÂè∑:", e.lineno);
        });

        // Èì∂Ë°åÈÖçÁΩÆ
        let BANK_CONFIG = {
            savings: { name: 'Ê¥ªÊúüÂ≠òÊ¨æ', rate: parseFloat(localStorage.getItem('bankSavingsRate') || '0.001'), key: 'bankSavings', period: 0, hasFluctuation: false },
            deposit: { name: 'ÂÆöÊúüÂ≠òÊ¨æ', rate: parseFloat(localStorage.getItem('bankDepositRate') || '0.003'), key: 'bankDeposit', period: 7, hasFluctuation: false }, // ÊîπÂõû7Â§©ÊúüÈôê
            investment: { name: 'ÊäïËµÑÁêÜË¥¢', rate: 0, key: 'bankInvestment', period: 1, hasFluctuation: true } // ÊäïËµÑÁêÜË¥¢Âü∫Á°ÄÊî∂ÁõäÁéá‰∏∫0%ÔºåÁ∫ØÈù†Ê≥¢Âä®
        };

        // È£éÈô©Ê≥¢Âä®ÈÖçÁΩÆ
        let RISK_CONFIG = {
            minLoss: parseFloat(localStorage.getItem('riskMinLoss') || '-0.18'),  // ÊúÄÂ∞è‰∫èÊçüÊØî‰æã
            maxProfit: parseFloat(localStorage.getItem('riskMaxProfit') || '0.25'), // ÊúÄÂ§ßÁõàÂà©ÊØî‰æã
            lossProbability: 0.38,  // ‰∫èÊçüÊ¶ÇÁéá 38%
            profitProbability: 0.57, // ÁõàÂà©Ê¶ÇÁéá 57%
            zeroProbability: 0.05    // Èõ∂Êî∂ÁõäÊ¶ÇÁéá 5%
        };

        // Êõ¥Êñ∞Âà©ÁéáÊòæÁ§∫
        function updateRateDisplays() {
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                const rateDisplay = document.getElementById(`${type}RateDisplay`);
                if (rateDisplay) {
                    rateDisplay.textContent = `${(config.rate * 100).toFixed(1)}%`;
                }
            });
        }

        // Èì∂Ë°åË¥¶Êà∑Êò®Êó•Êî∂ÁõäÂäüËÉΩ
        function updateBankEarnings() {
            // Ê£ÄÊü•ÊòØÂê¶‰ΩøÁî®‰∫ÜË∂ÖÁ∫ßÂø´ËøõÂäüËÉΩ
            const superFastForwardUsed = localStorage.getItem('superFastForwardUsed');
            if (superFastForwardUsed === 'true') {
                console.log("[Âà©ÊÅØËÆ°ÁÆó] Ê£ÄÊµãÂà∞Ë∂ÖÁ∫ßÂø´ËøõÂ∑≤‰ΩøÁî®ÔºåË∑≥ËøáÂà©ÊÅØËÆ°ÁÆó");
                // Ê∏ÖÈô§Ë∂ÖÁ∫ßÂø´ËøõÊ†áËÆ∞Ôºå‰ª•‰æø‰∏ãÊ¨°Ê≠£Â∏∏ËÆ°ÁÆó
                localStorage.removeItem('superFastForwardUsed');
                
                // ÊòæÁ§∫Êò®Êó•Êî∂ÁõäÔºà‰ΩÜ‰∏çËÆ°ÁÆóÊñ∞ÁöÑÂà©ÊÅØÔºâ
                Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                    const earningsElement = document.getElementById(`${type}Earnings`);
                    if (earningsElement) {
                        const yesterdayEarnings = parseInt(localStorage.getItem(`yesterdayEarnings_${type}`) || '0');
                        const yesterdayRate = parseFloat(localStorage.getItem(`yesterdayRate_${type}`) || config.rate);
                        
                        // ÊòæÁ§∫Êî∂ÁõäÂíåÂÆûÈôÖÂà©Áéá
                        if (config.hasFluctuation) {
                            const baseRatePercent = (config.rate * 100).toFixed(1);
                            const actualRatePercent = (yesterdayRate * 100).toFixed(1);
                            
                            // ÈÅøÂÖçÈô§‰ª•Èõ∂ÈîôËØØ
                            let fluctuation = '0.0';
                            if (config.rate !== 0) {
                                fluctuation = ((yesterdayRate - config.rate) / config.rate * 100).toFixed(1);
                            }
                            
                            const fluctuationSign = fluctuation >= 0 ? '+' : '';
                            
                            earningsElement.innerHTML = `${yesterdayEarnings}<br><span style="font-size: 0.8rem; color: ${yesterdayRate >= 0 ? '#06d6a0' : '#ff6b6b'}">${actualRatePercent}% (${fluctuationSign}${fluctuation}%)</span>`;
                        } else {
                            earningsElement.textContent = yesterdayEarnings;
                        }
                        
                        // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
                        if (yesterdayEarnings > 0) {
                            earningsElement.classList.add('animate-count-up');
                            setTimeout(() => earningsElement.classList.remove('animate-count-up'), 500);
                        }
                    }
                });
                return;
            }
            
            // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊõ¥Êñ∞Êò®Êó•Êî∂Áõä
            const today = new Date().toDateString();
            const lastVisitDate = localStorage.getItem('lastVisitDate');
            
            // Â¶ÇÊûúÊòØÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆÊàñÊñ∞ÁöÑ‰∏ÄÂ§©ÔºåËÆ°ÁÆóÊò®Êó•Êî∂Áõä
            if (!lastVisitDate || lastVisitDate !== today) {
                console.log("[Âà©ÊÅØËÆ°ÁÆó] Ê£ÄÊµãÂà∞Êñ∞ÁöÑ‰∏ÄÂ§©ÔºåÂºÄÂßãËÆ°ÁÆóÂà©ÊÅØ");
                
                // ËÆ°ÁÆóÊò®Êó•Êî∂ÁõäÔºàËÄÉËôëÊ≥¢Âä®Ôºâ
                Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                    const amount = parseInt(localStorage.getItem(config.key) || '0');
                    if (amount > 0) {
                        console.log(`[Âà©ÊÅØËÆ°ÁÆó] ËÆ°ÁÆó ${config.name} Âà©ÊÅØÔºåÈáëÈ¢ù: ${amount}`);
                        
                        // ËÆ°ÁÆóÂÆûÈôÖÂà©ÁéáÔºàËÄÉËôëÊ≥¢Âä®Ôºâ
                        let actualRate = config.rate;
                        let fluctuationType = 'none';
                        
                        if (config.hasFluctuation) {
                            // ‰ΩøÁî®‰ºòÂåñÁöÑÊ≥¢Âä®ÁÆóÊ≥ïÔºåÁ°Æ‰øùÊ¶ÇÁéáÂàÜÂ∏ÉÂáÜÁ°Æ
                            const random = Math.random();
                            
                            if (random < RISK_CONFIG.lossProbability) {
                                // 38%Ê¶ÇÁéá‰∫èÊçüÔºö-18%Âà∞0%
                                fluctuationType = 'loss';
                                actualRate = RISK_CONFIG.minLoss * Math.random(); // ÂùáÂåÄÂàÜÂ∏ÉÂú®ÊúÄÂ∞è‰∫èÊçüÂà∞0‰πãÈó¥
                                console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} ‰∫èÊçüÊ≥¢Âä®ÔºåÂÆûÈôÖÂà©Áéá: ${(actualRate * 100).toFixed(2)}%`);
                            } else if (random < RISK_CONFIG.lossProbability + RISK_CONFIG.profitProbability) {
                                // 57%Ê¶ÇÁéáÁõàÂà©Ôºö0%Âà∞25%
                                fluctuationType = 'profit';
                                actualRate = RISK_CONFIG.maxProfit * Math.random(); // ÂùáÂåÄÂàÜÂ∏ÉÂú®0Âà∞ÊúÄÂ§ßÁõàÂà©‰πãÈó¥
                                console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} ÁõàÂà©Ê≥¢Âä®ÔºåÂÆûÈôÖÂà©Áéá: ${(actualRate * 100).toFixed(2)}%`);
                            } else {
                                // 5%Ê¶ÇÁéáÈõ∂Êî∂Áõä
                                fluctuationType = 'zero';
                                actualRate = 0;
                                console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} Èõ∂Êî∂Áõä`);
                            }
                        }
                        
                        const interest = Math.floor(amount * actualRate);
                        console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} ËÆ°ÁÆóÂà©ÊÅØ: ${interest} (Âà©Áéá: ${(actualRate * 100).toFixed(2)}%)`);
                        
                        if (interest !== 0) {
                            // Ê∑ªÂä†Âà©ÊÅØÂà∞Ë¥¶Êà∑ÔºàÂè™ÊúâÈùûÈõ∂Êî∂ÁõäÊâçËÆ∞ÂΩïÔºâ
                            localStorage.setItem(config.key, (amount + interest).toString());
                            
                            // ‰øùÂ≠òÊò®Êó•Êî∂ÁõäÂíåÂÆûÈôÖÂà©ÁéáÁî®‰∫éÊòæÁ§∫
                            localStorage.setItem(`yesterdayEarnings_${type}`, interest.toString());
                            localStorage.setItem(`yesterdayRate_${type}`, actualRate.toString());
                            
                            // ËÆ∞ÂΩïÂà©ÊÅØ‰∫§ÊòìÂà∞‰∫§ÊòìÂéÜÂè≤
                            const transaction = {
                                type: 'interest',
                                accountType: type,
                                accountName: config.name,
                                amount: interest,
                                date: new Date().toISOString(),
                                fluctuationType: fluctuationType
                            };
                            
                            const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
                            transactions.push(transaction);
                            localStorage.setItem('bankTransactions', JSON.stringify(transactions));
                            
                            console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} Âà©ÊÅØÂ∑≤Êõ¥Êñ∞ÔºåÊñ∞‰ΩôÈ¢ù: ${amount + interest}`);
                        } else if (config.hasFluctuation && fluctuationType === 'zero') {
                            // Èõ∂Êî∂ÁõäÊó∂Âè™ËÆ∞ÂΩïÊòæÁ§∫‰ø°ÊÅØÔºå‰∏çÊîπÂèòË¥¶Êà∑‰ΩôÈ¢ù
                            localStorage.setItem(`yesterdayEarnings_${type}`, '0');
                            localStorage.setItem(`yesterdayRate_${type}`, '0');
                            console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} Èõ∂Êî∂ÁõäÔºå‰ªÖËÆ∞ÂΩïÊòæÁ§∫‰ø°ÊÅØ`);
                        }
                    } else {
                        console.log(`[Âà©ÊÅØËÆ°ÁÆó] ${config.name} ‰ΩôÈ¢ù‰∏∫0ÔºåË∑≥ËøáËÆ°ÁÆó`);
                    }
                });
                
                // Êõ¥Êñ∞ÊúÄÂêéËÆøÈóÆÊó•Êúü
                localStorage.setItem('lastVisitDate', today);
                console.log("[Âà©ÊÅØËÆ°ÁÆó] Âà©ÊÅØËÆ°ÁÆóÂÆåÊàêÔºåÊõ¥Êñ∞ÊúÄÂêéËÆøÈóÆÊó•Êúü");
            } else {
                console.log("[Âà©ÊÅØËÆ°ÁÆó] ‰ªäÂ§©Â∑≤ÁªèËÆ°ÁÆóËøáÂà©ÊÅØÔºåË∑≥ËøáËÆ°ÁÆó");
            }

            // ÊòæÁ§∫Êò®Êó•Êî∂Áõä
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                const earningsElement = document.getElementById(`${type}Earnings`);
                if (earningsElement) {
                    const yesterdayEarnings = parseInt(localStorage.getItem(`yesterdayEarnings_${type}`) || '0');
                    const yesterdayRate = parseFloat(localStorage.getItem(`yesterdayRate_${type}`) || config.rate);
                    
                    // ÊòæÁ§∫Êî∂ÁõäÂíåÂÆûÈôÖÂà©Áéá
                    if (config.hasFluctuation) {
                        const baseRatePercent = (config.rate * 100).toFixed(1);
                        const actualRatePercent = (yesterdayRate * 100).toFixed(1);
                        
                        // ÈÅøÂÖçÈô§‰ª•Èõ∂ÈîôËØØ
                        let fluctuation = '0.0';
                        if (config.rate !== 0) {
                            fluctuation = ((yesterdayRate - config.rate) / config.rate * 100).toFixed(1);
                        }
                        
                        const fluctuationSign = fluctuation >= 0 ? '+' : '';
                        
                        earningsElement.innerHTML = `${yesterdayEarnings}<br><span style="font-size: 0.8rem; color: ${yesterdayRate >= 0 ? '#06d6a0' : '#ff6b6b'}">${actualRatePercent}% (${fluctuationSign}${fluctuation}%)</span>`;
                    } else {
                        earningsElement.textContent = yesterdayEarnings;
                    }
                    
                    // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
                    if (yesterdayEarnings > 0) {
                        earningsElement.classList.add('animate-count-up');
                        setTimeout(() => earningsElement.classList.remove('animate-count-up'), 500);
                    }
                }
            });
        }

        // ËØäÊñ≠Ê†∏ÂøÉÂØπË±°ÂíåÂáΩÊï∞ÔºàÊîæÂú®BANK_CONFIGÂÆö‰πâ‰πãÂêéÔºâ
        console.log("[ËØäÊñ≠] È°µÈù¢Âä†ËΩΩÂºÄÂßã");
        console.log("[ËØäÊñ≠] BANK_CONFIG ÊòØÂê¶ÂÆö‰πâÔºü", typeof BANK_CONFIG !== 'undefined' ? 'ÊòØ' : 'Âê¶');

        // ÈªòËÆ§ÂØÜÁ†Å
        

        // ÂàùÂßãÂåñÊï∞ÊçÆÔºàÂè™Âú®Á¨¨‰∏ÄÊ¨°ËÆøÈóÆÊó∂ÊâßË°åÔºâ
        function initializeData() {
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂàùÂßãÂåñËøáÔºà‰ΩøÁî®‰∏Ä‰∏™Ê†áËÆ∞Ôºâ
            const isInitialized = localStorage.getItem('bankInitialized');
            
            if (!isInitialized) {
                console.log("[ÂàùÂßãÂåñ] Á¨¨‰∏ÄÊ¨°ËÆøÈóÆÈì∂Ë°åÈ°µÈù¢ÔºåÂàùÂßãÂåñÊï∞ÊçÆ");
                
                // ÂàùÂßãÂåñÂÖëÊç¢Âà∏‰ΩôÈ¢ùÔºà‰∏é‰∏ªÈ°µÈù¢ÂêåÊ≠•Ôºâ
                if (!localStorage.getItem('voucher')) {
                    localStorage.setItem('voucher', '0');
                }
                
                // ÂàùÂßãÂåñÈì∂Ë°åË¥¶Êà∑Êï∞ÊçÆ
                Object.values(BANK_CONFIG).forEach(config => {
                    if (!localStorage.getItem(config.key)) {
                        localStorage.setItem(config.key, '0');
                    }
                });

                // ÂàùÂßãÂåñ‰∫§ÊòìÂéÜÂè≤
                if (!localStorage.getItem('bankTransactions')) {
                    localStorage.setItem('bankTransactions', JSON.stringify([]));
                }

                // ÂàùÂßãÂåñÊúÄÂêéÂà©ÊÅØËÆ°ÁÆóÊó•Êúü
                if (!localStorage.getItem('lastInterestDate')) {
                    localStorage.setItem('lastInterestDate', new Date().toDateString());
                }
                
                // Ê†áËÆ∞‰∏∫Â∑≤ÂàùÂßãÂåñ
                localStorage.setItem('bankInitialized', 'true');
                console.log("[ÂàùÂßãÂåñ] Êï∞ÊçÆÂàùÂßãÂåñÂÆåÊàê");
            } else {
                console.log("[ÂàùÂßãÂåñ] Èì∂Ë°åÊï∞ÊçÆÂ∑≤Â≠òÂú®ÔºåË∑≥ËøáÂàùÂßãÂåñ");
            }
        }

        // Ê£ÄÊü•Âπ∂Â§ÑÁêÜÂÆöÊúüÂ≠òÊ¨æÂà∞ÊúüËá™Âä®Áª≠Â≠ò
        function checkAndRenewDeposits() {
            console.log("[ÂÆöÊúüÂ≠òÊ¨æ] Ê£ÄÊü•ÂÆöÊúüÂ≠òÊ¨æÂà∞ÊúüÊÉÖÂÜµ");
            
            const depositRecords = JSON.parse(localStorage.getItem('bankDepositRecords') || '[]');
            const now = new Date();
            let renewed = false;
            
            // Ê£ÄÊü•ÊòØÂê¶ÊúâÂà∞ÊúüÁöÑÂÆöÊúüÂ≠òÊ¨æ
            const updatedRecords = depositRecords.filter(record => {
                const maturityDate = new Date(record.maturityDate);
                
                if (maturityDate <= now) {
                    // ÂÆöÊúüÂ≠òÊ¨æÂà∞ÊúüÔºåËá™Âä®Áª≠Â≠ò
                    console.log(`[ÂÆöÊúüÂ≠òÊ¨æ] ÂèëÁé∞Âà∞ÊúüÂ≠òÊ¨æÔºåÈáëÈ¢ù: ${record.amount}ÔºåËá™Âä®Áª≠Â≠ò7Â§©`);
                    
                    // Êõ¥Êñ∞Âà∞ÊúüÊó∂Èó¥‰∏∫7Â§©Âêé
                    record.maturityDate = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString();
                    renewed = true;
                    
                    // ËÆ∞ÂΩïÁª≠Â≠ò‰∫§Êòì
                    const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
                    transactions.push({
                        type: 'renew',
                        accountType: 'deposit',
                        accountName: 'ÂÆöÊúüÂ≠òÊ¨æ',
                        amount: record.amount,
                        date: new Date().toISOString(),
                        description: 'ÂÆöÊúüÂ≠òÊ¨æÂà∞ÊúüËá™Âä®Áª≠Â≠ò7Â§©'
                    });
                    localStorage.setItem('bankTransactions', JSON.stringify(transactions));
                    
                    return true; // ‰øùÁïôËÆ∞ÂΩïÔºå‰ΩÜÊõ¥Êñ∞Âà∞ÊúüÊó∂Èó¥
                }
                
                return true; // ‰øùÁïôÊú™Âà∞ÊúüÁöÑËÆ∞ÂΩï
            });
            
            if (renewed) {
                localStorage.setItem('bankDepositRecords', JSON.stringify(updatedRecords));
                console.log("[ÂÆöÊúüÂ≠òÊ¨æ] ÂÆöÊúüÂ≠òÊ¨æËá™Âä®Áª≠Â≠òÂÆåÊàê");
            }
            
            return renewed;
        }

        // Êõ¥Êñ∞UI
        function updateUI() {
            // ÂÖàÊ£ÄÊü•ÂÆöÊúüÂ≠òÊ¨æÂà∞ÊúüËá™Âä®Áª≠Â≠ò
            checkAndRenewDeposits();
            
            // Êõ¥Êñ∞ÂΩìÂâçÂÖëÊç¢Âà∏‰ΩôÈ¢ùÔºà‰∏é‰∏ªÈ°µÈù¢ÂêåÊ≠•Ôºâ
            const currentVoucher = parseInt(localStorage.getItem('voucher') || '0');
            document.getElementById('currentVoucherAmount').textContent = currentVoucher;
            
            // ÂêåÊ≠•Âà∞‰∏ªÈ°µÈù¢ÔºàÁ°Æ‰øù‰∏ªÈ°µÈù¢‰πüËÉΩÁúãÂà∞ÊúÄÊñ∞Êï∞ÊçÆÔºâ
            if (window.parent && window.parent.updateVoucherDisplay) {
                window.parent.updateVoucherDisplay();
            }

            // Êõ¥Êñ∞Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                const amount = parseInt(localStorage.getItem(config.key) || '0');
                document.getElementById(type + 'Amount').textContent = amount;
                
                // ÊòæÁ§∫ÂÆöÊúüÂ≠òÊ¨æÁöÑËØ¶ÁªÜ‰ø°ÊÅØ
                if (config.period > 0) {
                    const depositRecords = JSON.parse(localStorage.getItem(config.key + 'Records') || '[]');
                    const now = new Date();
                    const activeDeposits = depositRecords.filter(record => {
                        const maturityDate = new Date(record.maturityDate);
                        return maturityDate > now;
                    });
                    
                    const depositInfoElement = document.getElementById(type + 'Info');
                    if (depositInfoElement) {
                        if (activeDeposits.length > 0) {
                            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                            const todayDeposits = activeDeposits.filter(record => {
                                const depositDate = new Date(record.depositDate);
                                const depositDay = new Date(depositDate.getFullYear(), depositDate.getMonth(), depositDate.getDate());
                                return depositDay.getTime() === today.getTime();
                            });
                            
                            if (type === 'investment' && todayDeposits.length > 0) {
                                depositInfoElement.innerHTML = `
                                    <div>Êó•Âà©Áéá: <span id="${type}RateDisplay">${(config.rate * 100).toFixed(1)}%</span></div>
                                    <div>ÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñÔºåÊúÄÈ´òÊî∂Áõä</div>
                                    <div style="color: #ff6b6b; font-size: 0.9rem; margin-top: 5px;">
                                        üìÖ ‰ªäÊó•Â≠òÂÖ• ${todayDeposits.length} Á¨îÔºåÊ¨°Êó•ÂèØÂèñÂá∫
                                    </div>
                                `;
                            } else if (type === 'investment') {
                                depositInfoElement.innerHTML = `
                                    <div>Êó•Âà©Áéá: <span id="${type}RateDisplay">${(config.rate * 100).toFixed(1)}%</span></div>
                                    <div>ÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñÔºåÊúÄÈ´òÊî∂Áõä</div>
                                `;
                            } else if (type === 'deposit' && activeDeposits.length > 0) {
                                const earliestMaturity = new Date(Math.min(...activeDeposits.map(r => new Date(r.maturityDate))));
                                const daysLeft = Math.ceil((earliestMaturity - now) / (1000 * 60 * 60 * 24));
                                depositInfoElement.innerHTML = `
                                    <div>Êó•Âà©Áéá: <span id="${type}RateDisplay">${(config.rate * 100).toFixed(1)}%</span></div>
                                    <div>7Â§©ÊúüÈôêÔºåÊî∂ÁõäÊõ¥È´ò</div>
                                    <div style="color: #ff6b6b; font-size: 0.9rem; margin-top: 5px;">
                                        üìÖ Êúâ ${activeDeposits.length} Á¨îÂ≠òÊ¨æÔºåÊúÄÊó© ${daysLeft} Â§©ÂêéÂà∞Êúü
                                    </div>
                                `;
                            } else {
                                depositInfoElement.innerHTML = `
                                    <div>Êó•Âà©Áéá: <span id="${type}RateDisplay">${(config.rate * 100).toFixed(1)}%</span></div>
                                    <div>${type === 'deposit' ? '7Â§©ÊúüÈôêÔºåÊî∂ÁõäÊõ¥È´ò' : 'ÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñÔºåÊúÄÈ´òÊî∂Áõä'}</div>
                                `;
                            }
                        } else {
                            depositInfoElement.innerHTML = `
                                <div>Êó•Âà©Áéá: <span id="${type}RateDisplay">${(config.rate * 100).toFixed(1)}%</span></div>
                                <div>${type === 'deposit' ? '7Â§©ÊúüÈôêÔºåÊî∂ÁõäÊõ¥È´ò' : 'ÂΩìÊó•Â≠òÂÖ•Ê¨°Êó•ÂèØÂèñÔºåÊúÄÈ´òÊî∂Áõä'}</div>
                            `;
                        }
                    }
                }
            });

            // Êõ¥Êñ∞‰∫§ÊòìÂéÜÂè≤
            updateTransactionHistory();
            
            // Êõ¥Êñ∞ÂêÑË¥¶Êà∑ÁöÑÁõàÂà©/‰∫èÊçüËÆ∞ÂΩï
            updateAccountHistory();

            // ËÆ°ÁÆóÂπ∂ÊòæÁ§∫Âà©ÊÅØ
            calculateAndShowInterest();
        }

        // Êõ¥Êñ∞‰∫§ÊòìÂéÜÂè≤Ôºà‰ªÖÊòæÁ§∫Â≠òÂèñÊÉÖÂÜµÔºå‰∏çÊòæÁ§∫Êî∂ÁõäÔºâ
        function updateTransactionHistory() {
            const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
            const transactionList = document.getElementById('transactionList');
            transactionList.innerHTML = '';

            // ËøáÊª§ÊéâÂà©ÊÅØ‰∫§ÊòìÔºåÂè™‰øùÁïôÂ≠òÂèñ‰∫§Êòì
            const filteredTransactions = transactions.filter(transaction => 
                transaction.type === 'deposit' || transaction.type === 'withdraw'
            );

            filteredTransactions.slice(-10).reverse().forEach(transaction => {
                const transactionItem = document.createElement('div');
                transactionItem.className = `transaction-item ${transaction.type === 'deposit' ? 'transaction-positive' : 'transaction-negative'}`;

                const amountSign = transaction.type === 'deposit' ? '+' : '-';
                const amountClass = transaction.type === 'deposit' ? 'positive' : 'negative';

                transactionItem.innerHTML = `
                    <div>
                        <div style="font-weight: bold;">${transaction.accountName}</div>
                        <div style="font-size: 0.9rem; color: #666;">${new Date(transaction.date).toLocaleString()}</div>
                    </div>
                    <div class="${amountClass}" style="font-size: 1.2rem; font-weight: bold;">
                        ${amountSign}${transaction.amount} ÂÖëÊç¢Âà∏
                    </div>
                `;

                transactionList.appendChild(transactionItem);
            });

            // Â¶ÇÊûúÊ≤°ÊúâÂ≠òÂèñËÆ∞ÂΩïÔºåÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
            if (filteredTransactions.length === 0) {
                transactionList.innerHTML = '<div style="text-align: center; color: #999; font-size: 0.9rem; padding: 20px;">ÊöÇÊó†Â≠òÂèñËÆ∞ÂΩï</div>';
            }
        }

        // ËÆ°ÁÆóÂπ∂ÊòæÁ§∫Âà©ÊÅØÔºàÂ∑≤Â∫üÂºÉÔºå‰ΩøÁî® updateBankEarnings Êõø‰ª£Ôºâ
        function calculateAndShowInterest() {
            // Ëøô‰∏™ÂáΩÊï∞Áé∞Âú®Âè™Ë∞ÉÁî®Áªü‰∏ÄÁöÑÂà©ÊÅØËÆ°ÁÆóÂáΩÊï∞
            updateBankEarnings();
        }

        // Êõ¥Êñ∞ÂêÑË¥¶Êà∑ÁöÑÁõàÂà©/‰∫èÊçüËÆ∞ÂΩï
        function updateAccountHistory() {
            console.log("[ÂéÜÂè≤ËÆ∞ÂΩï] ÂºÄÂßãÊõ¥Êñ∞ÂêÑË¥¶Êà∑ÁöÑÁõàÂà©/‰∫èÊçüËÆ∞ÂΩï");
            
            // Ëé∑ÂèñÊâÄÊúâ‰∫§ÊòìËÆ∞ÂΩï
            const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
            
            // Ëá™Âä®Âà†Èô§14Â§©ÂâçÁöÑËÆ∞ÂΩï
            const fourteenDaysAgo = new Date();
            fourteenDaysAgo.setDate(fourteenDaysAgo.getDate() - 14);
            
            const filteredTransactions = transactions.filter(transaction => {
                const transactionDate = new Date(transaction.date);
                return transactionDate >= fourteenDaysAgo;
            });
            
            // Â¶ÇÊûúÂà†Èô§‰∫ÜËÆ∞ÂΩïÔºåÊõ¥Êñ∞localStorage
            if (filteredTransactions.length < transactions.length) {
                localStorage.setItem('bankTransactions', JSON.stringify(filteredTransactions));
                console.log(`[ÂéÜÂè≤ËÆ∞ÂΩï] Â∑≤Âà†Èô§ ${transactions.length - filteredTransactions.length} Êù°14Â§©ÂâçÁöÑËÆ∞ÂΩï`);
            }
            
            // ÊåâË¥¶Êà∑Á±ªÂûãÂàÜÁªÑ‰∫§ÊòìËÆ∞ÂΩï
            const accountHistories = {
                savings: [],
                deposit: [],
                investment: []
            };
            
            // Á≠õÈÄâÂá∫ÊâÄÊúâ‰∫§ÊòìËÆ∞ÂΩïÔºàÂåÖÊã¨Â≠òÂèñÂíåÂà©ÊÅØÔºâ
            transactions.forEach(transaction => {
                if (accountHistories[transaction.accountType]) {
                    accountHistories[transaction.accountType].push(transaction);
                }
            });
            
            // Êõ¥Êñ∞ÂêÑË¥¶Êà∑ÁöÑÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫
            Object.entries(accountHistories).forEach(([accountType, history]) => {
                const historyElement = document.getElementById(accountType + 'History');
                if (historyElement) {
                    // ÊåâÊó•ÊúüÂÄíÂ∫èÊéíÂàóÔºåÊòæÁ§∫ÊúÄËøë5Êù°ËÆ∞ÂΩï
                    const recentHistory = history
                        .sort((a, b) => new Date(b.date) - new Date(a.date))
                        .slice(0, 5);
                    
                    if (recentHistory.length === 0) {
                        historyElement.innerHTML = '<div style="text-align: center; color: #999; font-size: 0.9rem; padding: 20px;">ÊöÇÊó†Êî∂ÁõäËÆ∞ÂΩï</div>';
                    } else {
                        historyElement.innerHTML = recentHistory.map(transaction => {
                            const date = new Date(transaction.date);
                            const dateStr = `${date.getMonth() + 1}/${date.getDate()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
                            
                            let className = 'history-item';
                            let amountText = '';
                            
                            if (transaction.fluctuationType === 'profit') {
                                className += ' history-profit';
                                amountText = `+${transaction.amount}`;
                            } else if (transaction.fluctuationType === 'loss') {
                                className += ' history-loss';
                                amountText = `-${Math.abs(transaction.amount)}`;
                            } else if (transaction.fluctuationType === 'zero') {
                                className += ' history-zero';
                                amountText = '0';
                            } else {
                                className += ' history-profit';
                                amountText = `+${transaction.amount}`;
                            }
                            
                            return `
                                <div class="${className}">
                                    <div>
                                        <div class="history-amount">${amountText} ÂÖëÊç¢Âà∏</div>
                                        <div class="history-date">${dateStr}</div>
                                    </div>
                                    <div style="font-size: 0.8rem; color: #666;">
                                        ${transaction.fluctuationType === 'profit' ? 'üìà ÁõàÂà©' : 
                                          transaction.fluctuationType === 'loss' ? 'üìâ ‰∫èÊçü' : 
                                          transaction.fluctuationType === 'zero' ? '‚ö™ Èõ∂Êî∂Áõä' : 'üí∞ Êî∂Áõä'}
                                    </div>
                                </div>
                            `;
                        }).join('');
                    }
                }
            });
            
            console.log("[ÂéÜÂè≤ËÆ∞ÂΩï] ÁõàÂà©/‰∫èÊçüËÆ∞ÂΩïÊõ¥Êñ∞ÂÆåÊàê");
        }

        // ÊâìÂºÄÂ≠òÂÖ•Ê®°ÊÄÅÊ°Ü
        function openDepositModal(accountType) {
            console.log("[ËØäÊñ≠] openDepositModal Ë¢´Ë∞ÉÁî®ÔºåË¥¶Êà∑Á±ªÂûã:", accountType);
            const config = BANK_CONFIG[accountType];
            console.log("[ËØäÊñ≠] Èì∂Ë°åÈÖçÁΩÆ:", config);
            
            const modalTitle = document.getElementById('depositModalTitle');
            const modal = document.getElementById('depositModal');
            
            if (!modalTitle || !modal) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞Â≠òÂÖ•Ê®°ÊÄÅÊ°ÜÂÖÉÁ¥†ÔºÅ");
                return;
            }
            
            modalTitle.textContent = `Â≠òÂÖ•${config.name}`;
            document.getElementById('depositAccountType').value = accountType;
            document.getElementById('depositAmount').value = '';
            modal.style.display = 'flex';
            console.log("[ËØäÊñ≠] Â≠òÂÖ•Ê®°ÊÄÅÊ°ÜÂ∑≤ÊâìÂºÄ");
        }

        // ÂÖ≥Èó≠Â≠òÂÖ•Ê®°ÊÄÅÊ°Ü
        function closeDepositModal() {
            document.getElementById('depositModal').style.display = 'none';
        }

        // ÊâìÂºÄÂèñÂá∫Ê®°ÊÄÅÊ°Ü
        function openWithdrawModal(accountType) {
            console.log("[ËØäÊñ≠] openWithdrawModal Ë¢´Ë∞ÉÁî®ÔºåË¥¶Êà∑Á±ªÂûã:", accountType);
            const config = BANK_CONFIG[accountType];
            console.log("[ËØäÊñ≠] Èì∂Ë°åÈÖçÁΩÆ:", config);
            
            const modalTitle = document.getElementById('withdrawModalTitle');
            const modal = document.getElementById('withdrawModal');
            
            if (!modalTitle || !modal) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞ÂèñÂá∫Ê®°ÊÄÅÊ°ÜÂÖÉÁ¥†ÔºÅ");
                return;
            }
            
            modalTitle.textContent = `ÂèñÂá∫${config.name}`;
            document.getElementById('withdrawAccountType').value = accountType;
            document.getElementById('withdrawAmount').value = '';
            modal.style.display = 'flex';
            console.log("[ËØäÊñ≠] ÂèñÂá∫Ê®°ÊÄÅÊ°ÜÂ∑≤ÊâìÂºÄ");
        }

        // ÂÖ≥Èó≠ÂèñÂá∫Ê®°ÊÄÅÊ°Ü
        function closeWithdrawModal() {
            document.getElementById('withdrawModal').style.display = 'none';
        }

        // Â§ÑÁêÜÂ≠òÂÖ•
        function processDeposit() {
            console.log("[ËØäÊñ≠] processDeposit Ë¢´Ë∞ÉÁî®");
            
            const accountType = document.getElementById('depositAccountType').value;
            const amountInput = document.getElementById('depositInputAmount').value;
            const amount = parseFloat(amountInput);
            
            console.log("[ËØäÊñ≠] Â≠òÂÖ•ÂèÇÊï∞:", { accountType, amount, amountInput });

            if (isNaN(amount) || amount <= 0 || amountInput.trim() === '') {
                console.error("[ÈîôËØØ] Â≠òÂÖ•Êï∞ÈáèÊó†Êïà", { amount, amountInput });
                showStatus('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂ≠òÂÖ•Êï∞ÈáèÔºÅ', 'error');
                return;
            }

            const currentVoucher = parseInt(localStorage.getItem('voucher') || '0');
            console.log("[ËØäÊñ≠] ÂΩìÂâçÂÖëÊç¢Âà∏‰ΩôÈ¢ù:", currentVoucher);
            
            if (amount > currentVoucher) {
                console.error("[ÈîôËØØ] ÂÖëÊç¢Âà∏‰ΩôÈ¢ù‰∏çË∂≥");
                showStatus('ÂÖëÊç¢Âà∏‰ΩôÈ¢ù‰∏çË∂≥ÔºÅ', 'error');
                return;
            }

            const config = BANK_CONFIG[accountType];
            const currentBankAmount = parseInt(localStorage.getItem(config.key) || '0');
            console.log("[ËØäÊñ≠] Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù:", { accountType, currentBankAmount });
            
            // Êõ¥Êñ∞ÂÖëÊç¢Âà∏‰ΩôÈ¢ù
            localStorage.setItem('voucher', (currentVoucher - amount).toString());
            
            // Êõ¥Êñ∞Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù
            localStorage.setItem(config.key, (currentBankAmount + amount).toString());
            
            // Â¶ÇÊûúÊòØÂÆöÊúüÂ≠òÊ¨æÊàñÊäïËµÑÁêÜË¥¢ÔºåËÆ∞ÂΩïÂ≠òÂÖ•Êó∂Èó¥
            if (config.period > 0) {
                console.log(`[Â≠òÊ¨æËÆ∞ÂΩï] ËÆ∞ÂΩï ${config.name} Â≠òÂÖ•Êó∂Èó¥ÔºåÊúüÈôê: ${config.period} Â§©`);
                const depositRecords = JSON.parse(localStorage.getItem(config.key + 'Records') || '[]');
                depositRecords.push({
                    amount: amount,
                    depositDate: new Date().toISOString(),
                    maturityDate: new Date(Date.now() + config.period * 24 * 60 * 60 * 1000).toISOString()
                });
                localStorage.setItem(config.key + 'Records', JSON.stringify(depositRecords));
            }

            // ËÆ∞ÂΩï‰∫§Êòì
            const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
            transactions.push({
                type: 'deposit',
                accountType: accountType,
                accountName: config.name,
                amount: amount,
                date: new Date().toISOString()
            });
            localStorage.setItem('bankTransactions', JSON.stringify(transactions));

            closeDepositModal();
            updateUI();
            showStatus(`ÊàêÂäüÂ≠òÂÖ• ${amount} ÂÖëÊç¢Âà∏Âà∞${config.name}ÔºÅ`, 'success');
            console.log("[ËØäÊñ≠] Â≠òÂÖ•Êìç‰ΩúÂÆåÊàê");
        }

        // Â§ÑÁêÜÂèñÂá∫
        function processWithdraw() {
            console.log("[ËØäÊñ≠] processWithdraw Ë¢´Ë∞ÉÁî®");
            
            const accountType = document.getElementById('withdrawAccountType').value;
            const amountInput = document.getElementById('withdrawAmount').value;
            const amount = parseFloat(amountInput);
            
            console.log("[ËØäÊñ≠] ÂèñÂá∫ÂèÇÊï∞:", { accountType, amount, amountInput });

            if (isNaN(amount) || amount <= 0 || amountInput.trim() === '') {
                console.error("[ÈîôËØØ] ÂèñÂá∫Êï∞ÈáèÊó†Êïà", { amount, amountInput });
                showStatus('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂèñÂá∫Êï∞ÈáèÔºÅ', 'error');
                return;
            }

            const config = BANK_CONFIG[accountType];
            const currentBankAmount = parseInt(localStorage.getItem(config.key) || '0');
            console.log("[ËØäÊñ≠] Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù:", { accountType, currentBankAmount });
            
            if (amount > currentBankAmount) {
                console.error("[ÈîôËØØ] Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù‰∏çË∂≥");
                showStatus('Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù‰∏çË∂≥ÔºÅ', 'error');
                return;
            }
            
            // Ê£ÄÊü•ÂÆöÊúüÂ≠òÊ¨æÊàñÊäïËµÑÁêÜË¥¢ÊòØÂê¶Âú®ÊúüÈôêÂÜÖ
            if (config.period > 0) {
                const depositRecords = JSON.parse(localStorage.getItem(config.key + 'Records') || '[]');
                const now = new Date();
                
                if (accountType === 'investment') {
                    // ÊäïËµÑÁêÜË¥¢ÔºöÊ£ÄÊü•ÊòØÂê¶Êúâ‰ªäÊó•Â≠òÂÖ•ÁöÑËÆ∞ÂΩïÔºàÊ¨°Êó•ÂèØÂèñÔºâ
                    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                    const todayDeposits = depositRecords.filter(record => {
                        const depositDate = new Date(record.depositDate);
                        const depositDay = new Date(depositDate.getFullYear(), depositDate.getMonth(), depositDate.getDate());
                        return depositDay.getTime() === today.getTime();
                    });
                    
                    if (todayDeposits.length > 0) {
                        console.error("[ÈîôËØØ] ÊäïËµÑÁêÜË¥¢‰ªäÊó•Â≠òÂÖ•ÁöÑËµÑÈáë‰∏çÂèØÂèñÂá∫");
                        showStatus(`${config.name}‰ªäÊó•Â≠òÂÖ•ÁöÑËµÑÈáë‰∏çÂèØÂèñÂá∫ÔºåËØ∑Á≠âÂæÖÊ¨°Êó•ÂÜçÊìç‰ΩúÔºÅ`, 'error');
                        return;
                    }
                } else if (accountType === 'deposit') {
                    // ÂÆöÊúüÂ≠òÊ¨æÔºöÊ£ÄÊü•ÊòØÂê¶ÊúâÊú™Âà∞ÊúüÁöÑËÆ∞ÂΩïÔºà7Â§©ÊúüÈôêÔºâ
                    const activeDeposits = depositRecords.filter(record => {
                        const maturityDate = new Date(record.maturityDate);
                        return maturityDate > now;
                    });
                    
                    if (activeDeposits.length > 0) {
                        console.error("[ÈîôËØØ] ÂÆöÊúüÂ≠òÊ¨æÂú®ÊúüÈôêÂÜÖÔºå‰∏çÂèØÂèñÂá∫");
                        const earliestMaturity = new Date(Math.min(...activeDeposits.map(r => new Date(r.maturityDate))));
                        const daysLeft = Math.ceil((earliestMaturity - now) / (1000 * 60 * 60 * 24));
                        showStatus(`${config.name}Êúâ ${activeDeposits.length} Á¨îÂ≠òÊ¨æÂú®ÊúüÈôêÂÜÖÔºåÊúÄÊó© ${daysLeft} Â§©ÂêéÂà∞ÊúüÔºÅËØ∑Á≠âÂæÖÂà∞ÊúüÂêéÂÜçÊìç‰Ωú„ÄÇ`, 'error');
                        return;
                    }
                }
            }

            const currentVoucher = parseInt(localStorage.getItem('voucher') || '0');
            console.log("[ËØäÊñ≠] ÂΩìÂâçÂÖëÊç¢Âà∏‰ΩôÈ¢ù:", currentVoucher);
            
            // Êõ¥Êñ∞Èì∂Ë°åË¥¶Êà∑‰ΩôÈ¢ù
            localStorage.setItem(config.key, (currentBankAmount - amount).toString());
            
            // Êõ¥Êñ∞ÂÖëÊç¢Âà∏‰ΩôÈ¢ù
            localStorage.setItem('voucher', (currentVoucher + amount).toString());
            
            // Â¶ÇÊûúÊòØÂÆöÊúüÂ≠òÊ¨æÊàñÊäïËµÑÁêÜË¥¢ÔºåÊõ¥Êñ∞Â≠òÊ¨æËÆ∞ÂΩïÔºàÁßªÈô§Â∑≤ÂèñÂá∫ÁöÑËÆ∞ÂΩïÔºâ
            if (config.period > 0) {
                const depositRecords = JSON.parse(localStorage.getItem(config.key + 'Records') || '[]');
                const now = new Date();
                
                // Ê®°ÊãüÂèñÂá∫Êìç‰ΩúÔºö‰ªéÊúÄÊñ∞ÁöÑËÆ∞ÂΩïÂºÄÂßãÂèñÂá∫
                let remainingAmount = amount;
                const updatedRecords = [];
                
                // ÊåâÂ≠òÂÖ•Êó∂Èó¥ÊéíÂ∫èÔºà‰ªéÊóßÂà∞Êñ∞Ôºâ
                const sortedRecords = depositRecords.sort((a, b) => new Date(a.depositDate) - new Date(b.depositDate));
                
                for (const record of sortedRecords) {
                    if (remainingAmount <= 0) {
                        updatedRecords.push(record);
                        continue;
                    }
                    
                    if (record.amount <= remainingAmount) {
                        // ÂÆåÂÖ®ÂèñÂá∫ËøôÁ¨îËÆ∞ÂΩï
                        remainingAmount -= record.amount;
                    } else {
                        // ÈÉ®ÂàÜÂèñÂá∫ËøôÁ¨îËÆ∞ÂΩï
                        record.amount -= remainingAmount;
                        updatedRecords.push(record);
                        remainingAmount = 0;
                    }
                }
                
                localStorage.setItem(config.key + 'Records', JSON.stringify(updatedRecords));
            }

            // ËÆ∞ÂΩï‰∫§Êòì
            const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
            transactions.push({
                type: 'withdraw',
                accountType: accountType,
                accountName: config.name,
                amount: amount,
                date: new Date().toISOString()
            });
            localStorage.setItem('bankTransactions', JSON.stringify(transactions));

            closeWithdrawModal();
            updateUI();
            showStatus(`ÊàêÂäü‰ªé${config.name}ÂèñÂá∫ ${amount} ÂÖëÊç¢Âà∏ÔºÅ`, 'success');
            console.log("[ËØäÊñ≠] ÂèñÂá∫Êìç‰ΩúÂÆåÊàê");
        }

        // ÊâìÂºÄËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÔºàÈúÄË¶ÅÂØÜÁ†ÅÈ™åËØÅÔºâ
        function openSettingsModal() {
            console.log("[ËØäÊñ≠] openSettingsModal Ë¢´Ë∞ÉÁî®");
            
            // ÊâìÂºÄÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°Ü
            openPasswordVerifyModal();
        }

        // ÊâìÂºÄÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°Ü
        function openPasswordVerifyModal() {
            console.log("[ËØäÊñ≠] ÊâìÂºÄÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°Ü");
            
            const passwordModal = document.getElementById('passwordVerifyModal');
            if (!passwordModal) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞ÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°ÜÔºÅ");
                return;
            }
            
            passwordModal.style.display = 'flex';
            document.getElementById('verifyPassword').value = '';
            document.getElementById('verifyPassword').focus();
            console.log("[ËØäÊñ≠] ÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°ÜÂ∑≤ÊâìÂºÄ");
        }

        // ÂÖ≥Èó≠ÂØÜÁ†ÅÈ™åËØÅÊ®°ÊÄÅÊ°Ü
        function closePasswordVerifyModal() {
            const passwordModal = document.getElementById('passwordVerifyModal');
            if (passwordModal) {
                passwordModal.style.display = 'none';
            }
        }

        // È™åËØÅÈì∂Ë°åËÆæÁΩÆÂØÜÁ†Å
        function verifyBankPassword() {
            const password = document.getElementById('verifyPassword').value;
            // ‰ªélocalStorageËé∑ÂèñÂØÜÁ†ÅÔºå‰∏éindex.html‰øùÊåÅ‰∏ÄËá¥
            const storedPassword = localStorage.getItem('password') || '1234';
            
            if (password === storedPassword) {
                closePasswordVerifyModal();
                openSettingsModalDirect(); // ÂØÜÁ†ÅÈ™åËØÅÈÄöËøáÂêéÁõ¥Êé•ÊâìÂºÄËÆæÁΩÆÊ®°ÊÄÅÊ°Ü
            } else {
                showStatus('ÂØÜÁ†ÅÈîôËØØÔºÅ', "error");
                document.getElementById('verifyPassword').value = '';
                document.getElementById('verifyPassword').focus();
            }
        }

        // Áõ¥Êé•ÊâìÂºÄËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÔºàÂØÜÁ†ÅÈ™åËØÅÈÄöËøáÂêéË∞ÉÁî®Ôºâ
        function openSettingsModalDirect() {
            console.log("[ËØäÊñ≠] openSettingsModalDirect Ë¢´Ë∞ÉÁî®");
            
            const settingsModal = document.getElementById('settingsModal');
            if (!settingsModal) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞Èì∂Ë°åËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÔºÅ");
                return;
            }
            
            console.log("[ËØäÊñ≠] Èì∂Ë°åËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÂ≠òÂú®ÔºåÂºÄÂßãËÆæÁΩÆÂÄº");
            
            const savingsRateInput = document.getElementById('savingsRate');
            const depositRateInput = document.getElementById('depositRate');
            const investmentRateInput = document.getElementById('investmentRate');
            const riskMinLossInput = document.getElementById('riskMinLoss');
            const riskMaxProfitInput = document.getElementById('riskMaxProfit');
            
            if (!savingsRateInput || !depositRateInput || !investmentRateInput || !riskMinLossInput || !riskMaxProfitInput) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞ËÆæÁΩÆËæìÂÖ•Ê°ÜÔºÅ");
                return;
            }
            
            savingsRateInput.value = (BANK_CONFIG.savings.rate * 100).toFixed(2);
            depositRateInput.value = (BANK_CONFIG.deposit.rate * 100).toFixed(2);
            investmentRateInput.value = (BANK_CONFIG.investment.rate * 100).toFixed(2);
            
            // ËÆæÁΩÆÈ£éÈô©Ê≥¢Âä®ËåÉÂõ¥
            riskMinLossInput.value = (RISK_CONFIG.minLoss * 100).toFixed(0);
            riskMaxProfitInput.value = (RISK_CONFIG.maxProfit * 100).toFixed(0);
            
            // Êõ¥Êñ∞ÂΩìÂâçÈÖçÁΩÆÈ¢ÑËßà
            updateRiskRangeDisplay();
            
            // ÈªòËÆ§ÊòæÁ§∫Âà©ÁéáËÆæÁΩÆÊ†áÁ≠æÈ°µ
            switchSettingsTab('rates');
            
            settingsModal.style.display = 'flex';
            console.log("[ËØäÊñ≠] Èì∂Ë°åËÆæÁΩÆÊ®°ÊÄÅÊ°ÜÂ∑≤ÊâìÂºÄ");
        }
        
        // Êõ¥Êñ∞È£éÈô©ËåÉÂõ¥ÊòæÁ§∫
        function updateRiskRangeDisplay() {
            const minLoss = document.getElementById('riskMinLoss').value;
            const maxProfit = document.getElementById('riskMaxProfit').value;
            const currentRiskRange = document.getElementById('currentRiskRange');
            
            if (currentRiskRange) {
                currentRiskRange.textContent = `${minLoss}% ~ +${maxProfit}%`;
            }
        }

        // ÂàáÊç¢ËÆæÁΩÆÊ†áÁ≠æÈ°µ
        function switchSettingsTab(tabId) {
            console.log("[ËØäÊñ≠] switchSettingsTab Ë¢´Ë∞ÉÁî®ÔºåÊ†áÁ≠æÈ°µID:", tabId);
            
            // ÈöêËóèÊâÄÊúâÊ†áÁ≠æÂÜÖÂÆπ
            document.querySelectorAll('#settingsModal .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÂèñÊ∂àÊâÄÊúâÊ†áÁ≠æÁöÑÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('#settingsModal .nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÊòæÁ§∫ÈÄâ‰∏≠ÁöÑÊ†áÁ≠æÂÜÖÂÆπ
            const targetTab = document.getElementById(tabId);
            if (targetTab) {
                targetTab.classList.add('active');
                console.log("[ËØäÊñ≠] Ê†áÁ≠æÂÜÖÂÆπÂ∑≤ÊòæÁ§∫:", tabId);
            } else {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞Ê†áÁ≠æÂÜÖÂÆπ:", tabId);
            }
            
            // ÊøÄÊ¥ªÈÄâ‰∏≠ÁöÑÊ†áÁ≠æ
            document.querySelectorAll('#settingsModal .nav-tab').forEach(tab => {
                const onclickAttr = tab.getAttribute('onclick');
                if (onclickAttr && onclickAttr.includes(tabId)) {
                    tab.classList.add('active');
                    console.log("[ËØäÊñ≠] Ê†áÁ≠æÊåâÈíÆÂ∑≤ÊøÄÊ¥ª:", tab.textContent);
                }
            });
            
            // Â¶ÇÊûúÂàáÊç¢Âà∞ËÆ∞ÂΩïÁÆ°ÁêÜÊ†áÁ≠æÈ°µÔºåÊõ¥Êñ∞ËÆ∞ÂΩïÁªüËÆ°
            if (tabId === 'records') {
                updateRecordsStats();
            }
            
            // Â¶ÇÊûúÂàáÊç¢Âà∞ËÆ∞ÂΩïÁÆ°ÁêÜÊ†áÁ≠æÈ°µÔºåÊõ¥Êñ∞ËÆ∞ÂΩïÁªüËÆ°
            if (tabId === 'records') {
                updateRecordsStats();
            }
        }

        // Êõ¥Êñ∞È£éÈô©Á≠âÁ∫ßÊòæÁ§∫
        function updateRiskDisplay(riskLevel) {
            const riskValue = document.getElementById('riskValue');
            const riskDescription = document.getElementById('riskDescription');
            const multiplierValue = document.getElementById('multiplierValue');
            const riskMultiplier = document.getElementById('riskMultiplier');
            const riskDisplay = document.querySelector('.risk-display');
            
            if (!riskValue || !riskDescription || !multiplierValue || !riskMultiplier || !riskDisplay) {
                return;
            }
            
            riskValue.textContent = riskLevel;
            
            let description = '';
            let multiplier = 1.0;
            let riskColor = '';
            let riskDetails = '';
            
            if (riskLevel <= 3) {
                description = '‰øùÂÆàÂûã';
                multiplier = 1.0;
                riskColor = 'linear-gradient(135deg, #06d6a0, #118ab2)';
                riskDetails = 'Á®≥ÂÆöÊî∂ÁõäÔºåÊó†È£éÈô©Ê≥¢Âä®ÔºåÈÄÇÂêàÈ£éÈô©ÊâøÂèóËÉΩÂäõËæÉ‰ΩéÁöÑÁî®Êà∑';
            } else if (riskLevel <= 6) {
                description = 'Âπ≥Ë°°Âûã';
                multiplier = 1.0 + (riskLevel - 3) * 0.2;
                riskColor = 'linear-gradient(135deg, #ffd166, #ff9e00)';
                riskDetails = '‰∏≠Á≠âÊî∂ÁõäÔºåËΩªÂæÆÊ≥¢Âä®ÔºåÈÄÇÂêàËøΩÊ±ÇÂπ≥Ë°°ÁöÑÁî®Êà∑';
            } else if (riskLevel <= 8) {
                description = 'ËøõÂèñÂûã';
                multiplier = 1.6 + (riskLevel - 6) * 0.3;
                riskColor = 'linear-gradient(135deg, #ff9e00, #ff6b6b)';
                riskDetails = 'ËæÉÈ´òÊî∂ÁõäÔºå‰∏≠Á≠âÊ≥¢Âä®ÔºåÈÄÇÂêàÊúâ‰∏ÄÂÆöÈ£éÈô©ÊâøÂèóËÉΩÂäõÁöÑÁî®Êà∑';
            } else {
                description = 'ÊøÄËøõÂûã';
                multiplier = 2.2 + (riskLevel - 8) * 0.4;
                riskColor = 'linear-gradient(135deg, #ff6b6b, #ef476f)';
                riskDetails = 'ÊúÄÈ´òÊî∂ÁõäÔºåÈ´òÈ£éÈô©Ê≥¢Âä®ÔºåÈÄÇÂêàÈ£éÈô©ÊâøÂèóËÉΩÂäõÂº∫ÁöÑÁî®Êà∑';
            }
            
            riskDescription.textContent = description;
            multiplierValue.textContent = multiplier.toFixed(1) + 'x';
            riskMultiplier.value = multiplier.toFixed(1);
            
            // Âä®ÊÄÅÊõ¥Êñ∞È£éÈô©ÊòæÁ§∫Âå∫ÂüüÁöÑÈ¢úËâ≤
            riskDisplay.style.background = riskColor;
            
            // Êõ¥Êñ∞È£éÈô©ËØ¶ÊÉÖÊèèËø∞
            const existingDetails = document.getElementById('riskDetails');
            if (existingDetails) {
                existingDetails.textContent = riskDetails;
            } else {
                const riskDetailsElement = document.createElement('div');
                riskDetailsElement.id = 'riskDetails';
                riskDetailsElement.style.cssText = 'font-size: 0.9rem; margin-top: 8px; opacity: 0.9;';
                riskDetailsElement.textContent = riskDetails;
                riskDisplay.appendChild(riskDetailsElement);
            }
            
            console.log("[ËØäÊñ≠] È£éÈô©Á≠âÁ∫ßÊõ¥Êñ∞:", { riskLevel, description, multiplier, riskDetails });
        }

        // ÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆ
        function resetToDefault() {
            document.getElementById('savingsRate').value = '0.1';
            document.getElementById('depositRate').value = '0.3';
            document.getElementById('investmentRate').value = '0.5';
            document.getElementById('riskMinLoss').value = '-18';
            document.getElementById('riskMaxProfit').value = '25';
            updateRiskRangeDisplay();
            
            showStatus('Â∑≤ÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆÔºÅ', 'warning');
        }

        // ÂÖ≥Èó≠ËÆæÁΩÆÊ®°ÊÄÅÊ°Ü
        function closeSettingsModal() {
            document.getElementById('settingsModal').style.display = 'none';
        }

        // ‰øùÂ≠òËÆæÁΩÆ
        function saveSettings() {
            console.log("[ËØäÊñ≠] saveSettings Ë¢´Ë∞ÉÁî®");
            
            const savingsRate = parseFloat(document.getElementById('savingsRate').value) / 100;
            const depositRate = parseFloat(document.getElementById('depositRate').value) / 100;
            const investmentRate = parseFloat(document.getElementById('investmentRate').value) / 100;
            const riskMinLoss = parseFloat(document.getElementById('riskMinLoss').value) / 100;
            const riskMaxProfit = parseFloat(document.getElementById('riskMaxProfit').value) / 100;

            console.log("[ËØäÊñ≠] ËÆæÁΩÆÂÄº:", { savingsRate, depositRate, investmentRate, riskMinLoss, riskMaxProfit });

            if (isNaN(savingsRate) || isNaN(depositRate) || isNaN(investmentRate) || isNaN(riskMinLoss) || isNaN(riskMaxProfit)) {
                console.error("[ÈîôËØØ] ËÆæÁΩÆÂÄºÊó†Êïà");
                showStatus('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑËÆæÁΩÆÂÄºÔºÅ', 'error');
                return;
            }

            // È™åËØÅÂà©ÁéáËÆæÁΩÆÊòØÂê¶ÂêàÁêÜ
            if (savingsRate > 0.1 || depositRate > 0.5 || investmentRate > 1.0) {
                const confirmHighRates = confirm('ÊÇ®ËÆæÁΩÆÁöÑÂà©ÁéáËæÉÈ´òÔºåÂèØËÉΩ‰ºöÂΩ±ÂìçÊ∏∏ÊàèÂπ≥Ë°°„ÄÇÁ°ÆÂÆöË¶ÅÁªßÁª≠ÂêóÔºü');
                if (!confirmHighRates) {
                    return;
                }
            }

            // È™åËØÅÈ£éÈô©Ê≥¢Âä®ËåÉÂõ¥ËÆæÁΩÆ
            if (riskMinLoss > 0 || riskMaxProfit < 0) {
                showStatus('È£éÈô©Ê≥¢Âä®ËåÉÂõ¥ËÆæÁΩÆÊó†ÊïàÔºÅ‰∫èÊçüÊØî‰æãÂ∫î‰∏∫Ë¥üÊï∞ÔºåÁõàÂà©ÊØî‰æãÂ∫î‰∏∫Ê≠£Êï∞„ÄÇ', 'error');
                return;
            }

            if (Math.abs(riskMinLoss) > 1.0 || riskMaxProfit > 1.0) {
                const confirmHighRisk = confirm('ÊÇ®ËÆæÁΩÆÁöÑÈ£éÈô©Ê≥¢Âä®ËåÉÂõ¥ËæÉÂ§ßÔºåÂèØËÉΩ‰ºöÂØºËá¥Êî∂ÁõäÊ≥¢Âä®ÂâßÁÉà„ÄÇÁ°ÆÂÆöË¶ÅÁªßÁª≠ÂêóÔºü');
                if (!confirmHighRisk) {
                    return;
                }
            }

            // ‰øùÂ≠òËÆæÁΩÆÂà∞localStorage
            localStorage.setItem('bankSavingsRate', savingsRate.toString());
            localStorage.setItem('bankDepositRate', depositRate.toString());
            localStorage.setItem('bankInvestmentRate', investmentRate.toString());
            localStorage.setItem('riskMinLoss', riskMinLoss.toString());
            localStorage.setItem('riskMaxProfit', riskMaxProfit.toString());

            // Êõ¥Êñ∞BANK_CONFIG
            BANK_CONFIG.savings.rate = savingsRate;
            BANK_CONFIG.deposit.rate = depositRate;
            BANK_CONFIG.investment.rate = investmentRate;

            // Êõ¥Êñ∞RISK_CONFIG
            RISK_CONFIG.minLoss = riskMinLoss;
            RISK_CONFIG.maxProfit = riskMaxProfit;

            // Êõ¥Êñ∞Âà©ÁéáÊòæÁ§∫ÂíåÊò®Êó•Êî∂Áõä
            updateRateDisplays();
            updateBankEarnings();

            closeSettingsModal();
            showStatus('Èì∂Ë°åËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅÊñ∞ÁöÑËÆæÁΩÆÂ∞ÜÂú®‰∏ãÊ¨°Â≠òÂèñÊ¨æÊó∂ÁîüÊïà„ÄÇ', 'success');
            console.log("[ËØäÊñ≠] Èì∂Ë°åËÆæÁΩÆÂ∑≤‰øùÂ≠ò");
        }



        // ÊòæÁ§∫Áä∂ÊÄÅÊ∂àÊÅØ
        function showStatus(message, type) {
            const status = document.createElement('div');
            status.className = `status-message status-${type}`;
            status.textContent = message;
            
            document.body.appendChild(status);
            
            setTimeout(() => {
                status.remove();
            }, 3000);
        }

        // Ê∏ÖÁ©∫Êî∂ÁõäËÆ∞ÂΩïÂíå‰∫§ÊòìËÆ∞ÂΩï
        function clearEarningsRecords() {
            // Á¨¨‰∏ÄÊ¨°Á°ÆËÆ§
            if (!confirm('‚ö†Ô∏è Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§ÊâÄÊúâÂéÜÂè≤ËÆ∞ÂΩïÔºåÂåÖÊã¨Êî∂ÁõäËÆ∞ÂΩï„ÄÅ‰∫§ÊòìËÆ∞ÂΩï„ÄÅÂà©ÊÅØÊî∂Áõä„ÄÅÊäïËµÑÁõà‰∫èÁ≠âÊâÄÊúâËÆ∞ÂΩïÔºåÊó†Ê≥ïÊÅ¢Â§çÔºÅ')) {
                return;
            }
            
            // Á¨¨‰∫åÊ¨°Á°ÆËÆ§ÔºåÁÆÄÂçïÁöÑÁ°ÆËÆ§Ê°Ü
            if (!confirm('‚ö†Ô∏è ‰∫åÊ¨°Á°ÆËÆ§ÔºöÊÇ®Á°ÆÂÆöË¶ÅÊ∞∏‰πÖÂà†Èô§ÊâÄÊúâËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄÔºÅ')) {
                showStatus('Êìç‰ΩúÂ∑≤ÂèñÊ∂àÔºåËÆ∞ÂΩïÊú™Ë¢´Âà†Èô§„ÄÇ', 'warning');
                return;
            }
            
            // Ê∏ÖÁ©∫ÊâÄÊúâË¥¶Êà∑ÁöÑÊî∂ÁõäËÆ∞ÂΩï
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                localStorage.removeItem(config.key + 'History');
            });
            
            // Ê∏ÖÁ©∫Èì∂Ë°åÊÄªÊî∂ÁõäËÆ∞ÂΩï
            localStorage.removeItem('bankEarningsHistory');
            
            // Ê∏ÖÁ©∫‰∫§ÊòìËÆ∞ÂΩï
            localStorage.setItem('bankTransactions', JSON.stringify([]));
            
            // Ê∏ÖÁ©∫ÂÆöÊúüÂ≠òÊ¨æËÆ∞ÂΩï
            localStorage.removeItem('bankDepositRecords');
            
            // Êõ¥Êñ∞ËÆ∞ÂΩïÁªüËÆ°ÊòæÁ§∫
            updateRecordsStats();
            
            // Êõ¥Êñ∞‰∫§ÊòìÂéÜÂè≤ÊòæÁ§∫
            updateTransactionHistory();
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            showStatus('‚úÖ ÊâÄÊúâËÆ∞ÂΩïÂ∑≤ÊàêÂäüÊ∏ÖÁ©∫ÔºÅ', 'success');
            
            console.log('[ËÆ∞ÂΩïÁÆ°ÁêÜ] ÊâÄÊúâËÆ∞ÂΩïÂ∑≤Ê∏ÖÁ©∫');
        }

        // Êõ¥Êñ∞ËÆ∞ÂΩïÁªüËÆ°ÊòæÁ§∫
        function updateRecordsStats() {
            const statsElement = document.getElementById('recordsStats');
            if (!statsElement) return;
            
            let totalRecords = 0;
            let statsHTML = '<div style="text-align: left;">';
            
            // ÁªüËÆ°ÂêÑË¥¶Êà∑ÁöÑËÆ∞ÂΩïÊï∞Èáè
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                const history = JSON.parse(localStorage.getItem(config.key + 'History') || '[]');
                const count = history.length;
                totalRecords += count;
                
                statsHTML += `<div style="margin-bottom: 8px;">
                    <span style="font-weight: bold;">${config.name}Ôºö</span>
                    <span style="color: ${count > 0 ? '#06d6a0' : '#666'};">${count} Êù°ËÆ∞ÂΩï</span>
                </div>`;
            });
            
            // ÁªüËÆ°Èì∂Ë°åÊÄªÊî∂ÁõäËÆ∞ÂΩï
            const bankHistory = JSON.parse(localStorage.getItem('bankEarningsHistory') || '[]');
            const bankCount = bankHistory.length;
            totalRecords += bankCount;
            
            statsHTML += `<div style="margin-bottom: 8px;">
                <span style="font-weight: bold;">Èì∂Ë°åÊÄªÊî∂ÁõäÔºö</span>
                <span style="color: ${bankCount > 0 ? '#06d6a0' : '#666'};">${bankCount} Êù°ËÆ∞ÂΩï</span>
            </div>`;
            
            // ÁªüËÆ°‰∫§ÊòìËÆ∞ÂΩï
            const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
            const transactionCount = transactions.length;
            totalRecords += transactionCount;
            
            statsHTML += `<div style="margin-bottom: 8px;">
                <span style="font-weight: bold;">‰∫§ÊòìËÆ∞ÂΩïÔºö</span>
                <span style="color: ${transactionCount > 0 ? '#06d6a0' : '#666'};">${transactionCount} Êù°ËÆ∞ÂΩï</span>
            </div>`;
            
            statsHTML += `<div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #ddd;">
                <span style="font-weight: bold; color: #ff6b6b;">ÊÄªËÆ°Ôºö${totalRecords} Êù°ËÆ∞ÂΩï</span>
            </div>`;
            
            statsHTML += '</div>';
            statsElement.innerHTML = statsHTML;
        }

        // ËÆæÁΩÆ‰∏ªÈ¢ò
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme === 'default' ? '' : theme);
            
            // Êõ¥Êñ∞‰∏ªÈ¢òÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // ËøîÂõû‰∏ªÈ°µ
        function goBack() {
            window.location.href = '../index.html';
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            console.log("[ËØäÊñ≠] DOMContentLoaded ‰∫ã‰ª∂Ëß¶Âèë");
            
            // Ê£ÄÊü•ÊåâÈíÆÁªëÂÆö
            console.log("[ËØäÊñ≠] Ê£ÄÊü•ÊåâÈíÆÁªëÂÆöÁä∂ÊÄÅ");
            
            // Ê£ÄÊü•Èì∂Ë°åËÆæÁΩÆÊåâÈíÆ
            const settingsBtn = document.querySelector('button[onclick*="openSettingsModal"]');
            console.log("[ËØäÊñ≠] Èì∂Ë°åËÆæÁΩÆÊåâÈíÆ:", settingsBtn ? 'ÊâæÂà∞' : 'Êú™ÊâæÂà∞');
            
            // Ê£ÄÊü•Â≠òÊ¨æÊåâÈíÆ
            const depositBtns = document.querySelectorAll('button[onclick*="openDepositModal"]');
            console.log("[ËØäÊñ≠] Â≠òÊ¨æÊåâÈíÆÊï∞Èáè:", depositBtns.length);
            
            // Ê£ÄÊü•ÂèñÊ¨æÊåâÈíÆ
            const withdrawBtns = document.querySelectorAll('button[onclick*="openWithdrawModal"]');
            console.log("[ËØäÊñ≠] ÂèñÊ¨æÊåâÈíÆÊï∞Èáè:", withdrawBtns.length);
            
            // Ê£ÄÊü•Ê®°ÊÄÅÊ°ÜÂÖÉÁ¥†
            const depositModal = document.getElementById('depositModal');
            const withdrawModal = document.getElementById('withdrawModal');
            const settingsModal = document.getElementById('settingsModal');
            console.log("[ËØäÊñ≠] Ê®°ÊÄÅÊ°ÜÁä∂ÊÄÅ:", {
                depositModal: depositModal ? 'ÊâæÂà∞' : 'Êú™ÊâæÂà∞',
                withdrawModal: withdrawModal ? 'ÊâæÂà∞' : 'Êú™ÊâæÂà∞',
                settingsModal: settingsModal ? 'ÊâæÂà∞' : 'Êú™ÊâæÂà∞'
            });
            
            initializeData();
            updateUI(); // Êõ¥Êñ∞UIÊòæÁ§∫ÊúÄÊñ∞Êï∞ÊçÆÔºàÂåÖÂê´Âà©ÊÅØËÆ°ÁÆóÔºâ
            updateRateDisplays();
            
            // È°µÈù¢Âä†ËΩΩÊó∂Êõ¥Êñ∞‰∏ÄÊ¨°UI
            
            console.log("[ËØäÊñ≠] È°µÈù¢ÂàùÂßãÂåñÂÆåÊàê");
        });



        // ËÆ°ÁÆóÊâÄÊúâÂ≠òÊ¨æÈ°πÁõÆÁöÑÊÄª‰ΩôÈ¢ù
        function calculateTotalDeposits() {
            let total = 0;
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                const amount = parseInt(localStorage.getItem(config.key) || '0');
                total += amount;
            });
            return total;
        }
        
        // Ê†πÊçÆÊÄª‰ΩôÈ¢ùËÆ°ÁÆóË∂ÖÁ∫ßÂø´ËøõË¥πÁî®
        function calculateSuperFastForwardCost(totalDeposits) {
            if (totalDeposits < 1000) {
                return { type: 'lottery', amount: 3, name: 'ÊäΩÂ•ñÂà∏' };
            } else if (totalDeposits < 2300) {
                return { type: 'lottery', amount: 5, name: 'ÊäΩÂ•ñÂà∏' };
            } else if (totalDeposits < 3600) {
                return { type: 'lottery', amount: 9, name: 'ÊäΩÂ•ñÂà∏' };
            } else if (totalDeposits < 6000) {
                return { type: 'lottery', amount: 15, name: 'ÊäΩÂ•ñÂà∏' };
            } else {
                return { type: 'premium', amount: 5, name: 'È´òÁ∫ßÊäΩÂ•ñÂà∏' };
            }
        }
        
        // ÊâìÂºÄË∂ÖÁ∫ßÂø´ËøõÊ®°ÊÄÅÊ°Ü
        function simulateNextDay() {
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÊâìÂºÄË∂ÖÁ∫ßÂø´ËøõÊ®°ÊÄÅÊ°Ü");
            
            // ËÆ°ÁÆóÊÄªÂ≠òÊ¨æ‰ΩôÈ¢ù
            const totalDeposits = calculateTotalDeposits();
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÊÄªÂ≠òÊ¨æ‰ΩôÈ¢ù:", totalDeposits);
            
            // ËÆ°ÁÆóË¥πÁî®
            const cost = calculateSuperFastForwardCost(totalDeposits);
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] Ë¥πÁî®ËÆ°ÁÆó:", cost);
            
            // Ê£ÄÊü•Ë¥ßÂ∏ÅÊï∞Èáè
            const currentAmount = parseInt(localStorage.getItem(cost.type) || '0');
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÂΩìÂâçË¥ßÂ∏ÅÊï∞Èáè:", currentAmount);
            
            const modal = document.getElementById('simulateNextDayModal');
            const content = document.getElementById('simulateNextDayContent');
            const confirmBtn = document.getElementById('confirmSimulateBtn');
            
            if (!modal || !content || !confirmBtn) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞Ë∂ÖÁ∫ßÂø´ËøõÊ®°ÊÄÅÊ°ÜÂÖÉÁ¥†ÔºÅ");
                return;
            }
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            confirmBtn.textContent = 'Á°ÆËÆ§Âø´Ëøõ';
            confirmBtn.style.display = 'none';
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            confirmBtn.textContent = 'Á°ÆËÆ§Âø´Ëøõ';
            confirmBtn.style.display = 'none';
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            confirmBtn.textContent = 'Á°ÆËÆ§Âø´Ëøõ';
            confirmBtn.style.display = 'none';
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            confirmBtn.textContent = 'Á°ÆËÆ§Âø´Ëøõ';
            confirmBtn.style.display = 'none';
            
            if (currentAmount < cost.amount) {
                // Ë¥ßÂ∏Å‰∏çË∂≥ÁöÑÊÉÖÂÜµ
                content.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">‚ùå</div>
                        <h3 style="color: #ff6b6b; margin-bottom: 15px;">${cost.name}‰∏çË∂≥</h3>
                        <p style="margin-bottom: 10px;">ÈúÄË¶Å${cost.amount}Âº†${cost.name}ÊâçËÉΩ‰ΩøÁî®Ë∂ÖÁ∫ßÂø´ËøõÂäüËÉΩ„ÄÇ</p>
                        <p style="color: #666; font-size: 14px;">ÂΩìÂâçÂâ©‰ΩôÔºö<strong>${currentAmount}</strong> Âº†${cost.name}</p>
                        <p style="color: #666; font-size: 14px; margin-top: 15px;">ÊÇ®ÂèØ‰ª•Âú®‰∏ªÈ°µÈù¢ÊàñÊäΩÂ•ñÈ°µÈù¢Ëé∑Âèñ${cost.name}„ÄÇ</p>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <p style="margin: 5px 0;"><strong>ÂΩìÂâçÊÄªÂ≠òÊ¨æÔºö</strong>${totalDeposits}ÂÖëÊç¢Âà∏</p>
                            <p style="margin: 5px 0;"><strong>Ë¥πÁî®Èò∂Ê¢ØÔºö</strong></p>
                            <ul style="text-align: left; margin: 5px 0; font-size: 12px;">
                                <li>ÊÄªÂ≠òÊ¨æ &lt; 1000Ôºö3ÊäΩÂ•ñÂà∏/Ê¨°</li>
                                <li>1000 ‚â§ ÊÄªÂ≠òÊ¨æ &lt; 2300Ôºö5ÊäΩÂ•ñÂà∏/Ê¨°</li>
                                <li>2300 ‚â§ ÊÄªÂ≠òÊ¨æ &lt; 3600Ôºö9ÊäΩÂ•ñÂà∏/Ê¨°</li>
                                <li>3600 ‚â§ ÊÄªÂ≠òÊ¨æ &lt; 6000Ôºö15ÊäΩÂ•ñÂà∏/Ê¨°</li>
                                <li>ÊÄªÂ≠òÊ¨æ ‚â• 6000Ôºö5È´òÁ∫ßÊäΩÂ•ñÂà∏/Ê¨°</li>
                            </ul>
                        </div>
                    </div>
                `;
                confirmBtn.style.display = 'none';
            } else {
                // Ë¥ßÂ∏ÅË∂≥Â§üÁöÑÊÉÖÂÜµ
                content.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üöÄ</div>
                        <h3 style="color: #06d6a0; margin-bottom: 15px;">Ë∂ÖÁ∫ßÂø´Ëøõ</h3>
                        <p style="margin-bottom: 15px;">Á´ãÂç≥Ê®°ÊãüÊ¨°Êó•Âà©ÊÅØËÆ°ÁÆóÔºåÊü•ÁúãÊî∂ÁõäÂèòÂåñ</p>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <p style="margin: 5px 0;"><strong>ÊÄªÂ≠òÊ¨æÔºö</strong>${totalDeposits}ÂÖëÊç¢Âà∏</p>
                            <p style="margin: 5px 0;"><strong>Ê∂àËÄóÔºö</strong>${cost.amount}Âº†${cost.name}</p>
                            <p style="margin: 5px 0;"><strong>ÂΩìÂâçÂâ©‰ΩôÔºö</strong>${currentAmount}Âº†</p>
                            <p style="margin: 5px 0;"><strong>Êìç‰ΩúÂêéÂâ©‰ΩôÔºö</strong>${currentAmount - cost.amount}Âº†</p>
                        </div>
                        <div style="background: #f0f8ff; padding: 10px; border-radius: 8px; margin: 10px 0;">
                            <p style="font-size: 12px; color: #666; margin-bottom: 5px;"><strong>Ë¥πÁî®Èò∂Ê¢ØÔºö</strong></p>
                            <ul style="text-align: left; margin: 0; font-size: 11px; padding-left: 15px;">
                                <li>&lt;1000Ôºö3ÊäΩÂ•ñÂà∏</li>
                                <li>1000-2299Ôºö5ÊäΩÂ•ñÂà∏</li>
                                <li>2300-3599Ôºö9ÊäΩÂ•ñÂà∏</li>
                                <li>3600-5999Ôºö15ÊäΩÂ•ñÂà∏</li>
                                <li>‚â•6000Ôºö5È´òÁ∫ßÊäΩÂ•ñÂà∏</li>
                            </ul>
                        </div>
                    </div>
                `;
                confirmBtn.style.display = 'inline-block';
                confirmBtn.onclick = function() {
                    executeSimulateNextDay(currentAmount, cost);
                };
            }
            
            modal.style.display = 'flex';
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] Ë∂ÖÁ∫ßÂø´ËøõÊ®°ÊÄÅÊ°ÜÂ∑≤ÊâìÂºÄ");
        }
        
        // ÊâßË°åË∂ÖÁ∫ßÂø´ËøõÊìç‰Ωú
        function executeSimulateNextDay(currentAmount, cost) {
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÂºÄÂßãÊâßË°åË∂ÖÁ∫ßÂø´ËøõÊìç‰Ωú");
            
            // Êâ£Èô§Áõ∏Â∫îË¥ßÂ∏Å
            const newAmount = currentAmount - cost.amount;
            localStorage.setItem(cost.type, newAmount.toString());
            console.log(`[Ë∂ÖÁ∫ßÂø´Ëøõ] Êâ£Èô§${cost.amount}Âº†${cost.name}ÔºåÂâ©‰Ωô:`, newAmount);
            
            // Ëé∑ÂèñÂΩìÂâçÊó•Êúü
            const currentDate = new Date();
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÂΩìÂâçÊó•Êúü:", currentDate.toDateString());
            
            // Ëé∑ÂèñÊúÄÂêéËÆøÈóÆÊó•Êúü
            const lastVisitDate = localStorage.getItem('lastVisitDate');
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÊúÄÂêéËÆøÈóÆÊó•Êúü:", lastVisitDate);
            
            // Ê®°ÊãüÊ¨°Êó•ÔºöÂ∞ÜÊúÄÂêéËÆøÈóÆÊó•ÊúüËÆæÁΩÆ‰∏∫Êò®Â§©
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toDateString();
            
            localStorage.setItem('lastVisitDate', yesterdayStr);
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ËÆæÁΩÆÊúÄÂêéËÆøÈóÆÊó•Êúü‰∏∫:", yesterdayStr);
            
            // ËÆæÁΩÆË∂ÖÁ∫ßÂø´ËøõÊ†áËÆ∞ÔºåÈò≤Ê≠¢Âà∑Êñ∞È°µÈù¢Êó∂ÈáçÂ§çËÆ°ÁÆó
            localStorage.setItem('superFastForwardUsed', 'true');
            
            // Êõ¥Êñ∞UIÊòæÁ§∫ÔºàÊ≠§Êó∂‰∏ç‰ºöËÆ°ÁÆóÂà©ÊÅØÔºåÂõ†‰∏∫Êó•ÊúüÂ∑≤ÁªèËÆæÁΩÆ‰∏∫Êò®Â§©Ôºâ
            updateUI();
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØÊ®°ÊÄÅÊ°Ü
            showSimulateNextDayResult(newAmount, cost);
            
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] Ê®°ÊãüÂÆåÊàêÔºåUIÂ∑≤Êõ¥Êñ∞");
        }
        
        // ‰ΩøÁî®‰∏é‰∏ªÈ°µÈù¢ÂÆåÂÖ®‰∏ÄËá¥ÁöÑÂà©ÊÅØËÆ°ÁÆóÈÄªËæë
        function simulateMainPageInterestCalculation() {
            console.log("[Ê®°ÊãüÊ¨°Êó•] ‰ΩøÁî®‰∏ªÈ°µÈù¢Âà©ÊÅØËÆ°ÁÆóÈÄªËæë");
            
            // ‰ΩøÁî®‰∏é‰∏ªÈ°µÈù¢ÂÆåÂÖ®‰∏ÄËá¥ÁöÑÂà©ÊÅØËÆ°ÁÆóÈÄªËæë
            Object.entries(BANK_CONFIG).forEach(([type, config]) => {
                const amount = parseInt(localStorage.getItem(config.key) || '0');
                if (amount > 0) {
                    console.log(`[Ê®°ÊãüÊ¨°Êó•] ËÆ°ÁÆó ${config.name} Âà©ÊÅØÔºåÈáëÈ¢ù: ${amount}`);
                    
                    // ËÆ°ÁÆóÂÆûÈôÖÂà©ÁéáÔºàËÄÉËôëÊ≥¢Âä®Ôºâ
                    let actualRate = config.rate;
                    let fluctuationType = 'none';
                    
                    if (config.hasFluctuation) {
                        // ‰ΩøÁî®‰∏é‰∏ªÈ°µÈù¢ÂÆåÂÖ®‰∏ÄËá¥ÁöÑÊ≥¢Âä®ÁÆóÊ≥ï
                        const random = Math.random();
                        
                        if (random < RISK_CONFIG.lossProbability) {
                            // 38%Ê¶ÇÁéá‰∫èÊçüÔºö-18%Âà∞0%
                            fluctuationType = 'loss';
                            actualRate = RISK_CONFIG.minLoss * Math.random(); // ÂùáÂåÄÂàÜÂ∏ÉÂú®ÊúÄÂ∞è‰∫èÊçüÂà∞0‰πãÈó¥
                            console.log(`[Ê®°ÊãüÊ¨°Êó•] ${config.name} ‰∫èÊçüÊ≥¢Âä®ÔºåÂÆûÈôÖÂà©Áéá: ${(actualRate * 100).toFixed(2)}%`);
                        } else if (random < RISK_CONFIG.lossProbability + RISK_CONFIG.profitProbability) {
                            // 57%Ê¶ÇÁéáÁõàÂà©Ôºö0%Âà∞25%
                            fluctuationType = 'profit';
                            actualRate = RISK_CONFIG.maxProfit * Math.random(); // ÂùáÂåÄÂàÜÂ∏ÉÂú®0Âà∞ÊúÄÂ§ßÁõàÂà©‰πãÈó¥
                            console.log(`[Ê®°ÊãüÊ¨°Êó•] ${config.name} ÁõàÂà©Ê≥¢Âä®ÔºåÂÆûÈôÖÂà©Áéá: ${(actualRate * 100).toFixed(2)}%`);
                        } else {
                            // 5%Ê¶ÇÁéáÈõ∂Êî∂Áõä
                            fluctuationType = 'zero';
                            actualRate = 0;
                            console.log(`[Ê®°ÊãüÊ¨°Êó•] ${config.name} Èõ∂Êî∂Áõä`);
                        }
                    }
                    
                    const interest = Math.floor(amount * actualRate);
                    
                    if (interest !== 0) {
                        // Ê∑ªÂä†Âà©ÊÅØÂà∞Ë¥¶Êà∑ÔºàÂè™ÊúâÈùûÈõ∂Êî∂ÁõäÊâçËÆ∞ÂΩïÔºâ
                        localStorage.setItem(config.key, (amount + interest).toString());
                        
                        // ‰øùÂ≠òÊò®Êó•Êî∂ÁõäÂíåÂÆûÈôÖÂà©ÁéáÁî®‰∫éÊòæÁ§∫
                        localStorage.setItem(`yesterdayEarnings_${type}`, interest.toString());
                        localStorage.setItem(`yesterdayRate_${type}`, actualRate.toString());
                        
                        // ËÆ∞ÂΩïÂà©ÊÅØ‰∫§ÊòìÂà∞‰∫§ÊòìÂéÜÂè≤
                        const transaction = {
                            type: 'interest',
                            accountType: type,
                            accountName: config.name,
                            amount: interest,
                            date: new Date().toISOString(),
                            fluctuationType: fluctuationType
                        };
                        
                        const transactions = JSON.parse(localStorage.getItem('bankTransactions') || '[]');
                        transactions.push(transaction);
                        localStorage.setItem('bankTransactions', JSON.stringify(transactions));
                        
                        console.log(`[Ê®°ÊãüÊ¨°Êó•] ${config.name} Âà©ÊÅØÂ∑≤Êõ¥Êñ∞ÔºåÊñ∞‰ΩôÈ¢ù: ${amount + interest}`);
                    } else if (config.hasFluctuation && fluctuationType === 'zero') {
                        // Èõ∂Êî∂ÁõäÊó∂Âè™ËÆ∞ÂΩïÊòæÁ§∫‰ø°ÊÅØÔºå‰∏çÊîπÂèòË¥¶Êà∑‰ΩôÈ¢ù
                        localStorage.setItem(`yesterdayEarnings_${type}`, '0');
                        localStorage.setItem(`yesterdayRate_${type}`, '0');
                        console.log(`[Ê®°ÊãüÊ¨°Êó•] ${config.name} Èõ∂Êî∂ÁõäÔºå‰ªÖËÆ∞ÂΩïÊòæÁ§∫‰ø°ÊÅØ`);
                    }
                } else {
                    console.log(`[Ê®°ÊãüÊ¨°Êó•] ${config.name} ‰ΩôÈ¢ù‰∏∫0ÔºåË∑≥ËøáËÆ°ÁÆó`);
                }
            });
            
            console.log("[Ê®°ÊãüÊ¨°Êó•] ‰∏ªÈ°µÈù¢Âà©ÊÅØËÆ°ÁÆóÈÄªËæëÊâßË°åÂÆåÊàê");
        }
        
        // ÊòæÁ§∫Ë∂ÖÁ∫ßÂø´ËøõÁªìÊûú
        function showSimulateNextDayResult(newAmount, cost) {
            const modal = document.getElementById('simulateNextDayModal');
            const content = document.getElementById('simulateNextDayContent');
            const confirmBtn = document.getElementById('confirmSimulateBtn');
            
            if (!modal || !content || !confirmBtn) {
                console.error("[ÈîôËØØ] Êú™ÊâæÂà∞Ë∂ÖÁ∫ßÂø´ËøõÊ®°ÊÄÅÊ°ÜÂÖÉÁ¥†ÔºÅ");
                return;
            }
            
            content.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 48px; margin-bottom: 15px;">‚úÖ</div>
                    <h3 style="color: #06d6a0; margin-bottom: 15px;">Ë∂ÖÁ∫ßÂø´ËøõÊàêÂäü</h3>
                    <p style="margin-bottom: 10px;">Â∑≤ÊàêÂäüÊ®°ÊãüÊ¨°Êó•Âà©ÊÅØËÆ°ÁÆóÔºÅ</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p style="margin: 5px 0;"><strong>Ê∂àËÄóÔºö</strong>${cost.amount}Âº†${cost.name}</p>
                        <p style="margin: 5px 0;"><strong>ÂΩìÂâçÂâ©‰ΩôÔºö</strong>${newAmount}Âº†</p>
                    </div>
                    <p style="color: #666; font-size: 14px;">ËØ∑Êü•ÁúãÂêÑË¥¶Êà∑ÁöÑÊò®Êó•Êî∂ÁõäÂèòÂåñ„ÄÇ</p>
                    <p style="color: #666; font-size: 14px;">Ê≠§ÂäüËÉΩ‰ΩøÁî®‰∏é‰∏ªÈ°µÈù¢ÂÆåÂÖ®‰∏ÄËá¥ÁöÑÂà©ÊÅØËÆ°ÁÆóÈÄªËæëÔºåÁ°Æ‰øùÊ®°ÊãüÁªìÊûú‰∏éÁúüÊ≠£Ê¨°Êó•‰∏ÄËá¥„ÄÇ</p>
                </div>
            `;
            
            confirmBtn.style.display = 'inline-block';
            confirmBtn.textContent = 'ÂÖ≥Èó≠';
            confirmBtn.onclick = function() {
                closeSimulateNextDayModal();
            };
            
            console.log("[Ë∂ÖÁ∫ßÂø´Ëøõ] ÊàêÂäüÊ∂àÊÅØÊ®°ÊÄÅÊ°ÜÂ∑≤ÊòæÁ§∫");
        }
        
        // ÂÖ≥Èó≠Ê®°ÊãüÊ¨°Êó•Ê®°ÊÄÅÊ°Ü
        function closeSimulateNextDayModal() {
            const modal = document.getElementById('simulateNextDayModal');
            if (modal) {
                modal.style.display = 'none';
            }
            console.log("[Ê®°ÊãüÊ¨°Êó•] Ê®°ÊãüÊ¨°Êó•Ê®°ÊÄÅÊ°ÜÂ∑≤ÂÖ≥Èó≠");
        }
    </script>
</body>
</html>
